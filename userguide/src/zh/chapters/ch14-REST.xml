<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "../../../target/docbook-tool-1.0/docbook-xml/docbookx.dtd">

<chapter>

  <title>REST API</title>
  <section>
    <title>通用Activiti REST原则</title>
    <section>
      <title>安装与认证</title>

      <para>activiti包含了一个activiti引擎的REST API，把activiti-rest.war部署到像Apache Tomcat这样的servlet容器就可以使用。不过，它也可以使用在其他web应用中，把activiti-rest的依赖都加入classpath，添加servlet，并映射到你的应用中。</para>
      <para>默认情况下，activiti引擎会连接内存数据库H2。你可以修改WEB-INF/classes目录下的db.properties来修改数据库设置。REST API使用JSON格式（http://www.json.org），它是基于Restlet（http://www.restlet.org）开发的。</para>
      <para>默认所有REST资源都需要先使用有效的activiti用户认证后才能使用。会使用Basic HTTP认证，所以你要一直在请求的HTTP头中包含一个<literal>Authorization: Basic ...==</literal>属性，或在请求url中包含用户名和密码（比如： <literal>http://username:password@localhost...</literal>）。
      </para>
      <para><emphasis role="bold">建议把Basic认证与HTTPS一起使用。</emphasis></para>
      <para>可以从删除对应资源的认证，或添加额外的授权给一个认证的用户（比如，把用户加入一个组，让它可以执行URL Y）。
	  可以使用<literal>org.activiti.rest.common.filter.RestAuthenticator</literal>的实现，它有两个方法：
      <itemizedlist>
        <listitem><para><emphasis><literal>boolean requestRequiresAuthentication(Request request)</literal></emphasis>：在请求认证检查之前调用（通过头部传递合法的账号和密码）。如果方法返回true，这个方法就需要认证才能访问。如果返回false，无论请求是否认证都可以访问。如果返回false，就不会为这个方法调用<literal>isRequestAuthorized</literal>。</para></listitem>
        <listitem><para><emphasis><literal>boolean isRequestAuthorized(Request request)</literal></emphasis>：在用户已经通过activiti账号管理认证后，但是再请求实际之前调用。可以用来检查认证用户是否可以访问对应请求。如果返回true，会允许请求执行。如果返回true，请求不会执行，客户端会收到对应的错误。</para></listitem>
      </itemizedlist>
      </para>
      <para>自定义的RestAuthenticator应该设置到RestletServlet的<literal>org.activiti.rest.service.application.ActivitiRestServicesApplication</literal>中。
	  最简单的方法是创建<literal>ActivitiRestServicesApplication</literal>的子类，并在servlet-mapping中设置自定义的类名：</para>

      <programlisting>
<![CDATA[   <!-- Restlet adapter -->
  <servlet>
    <servlet-name>RestletServlet</servlet-name>
    <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
    <init-param>
      <!-- Application class name -->
      <param-name>org.restlet.application</param-name>
      <param-value>com.my.company.CustomActivitiRestServicesApplication</param-value>
    </init-param>
  </servlet>]]></programlisting>
    </section>

     <section id="restUsageInTomcat">
      <title>使用Tomcat</title>
      <para>根据<ulink url="http://tomcat.apache.org/tomcat-7.0-doc/security-howto.html">Tomcat的默认安全配置</ulink>，默认<emphasis role="bold">转码的前斜线（<literal>%2F</literal>和<literal>%5C</literal>）都不允许使用（返回400）。</emphasis>
      这可能对部署资源和它们的数据URL造成影响，URL可能会包含转移的前斜线。

      <emphasis role="bold">当出现预期外的400问题，设置下面这个系统参数：<literal>-Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true.</literal></emphasis></para>
    </section>

     <section>
      <title>方法和返回值</title>
      <table>
        <title>HTTP方法和对应操作</title>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>方法</entry>
              <entry>操作</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><literal>GET</literal></entry>
              <entry>获得一个资源或获得多个资源</entry>
            </row>
            <row>
              <entry><literal>POST</literal></entry>
              <entry>创建一个新资源。当请求结果太复杂，无法放到GET请求的URL中，也用来查询资源。</entry>
            </row>
            <row>
              <entry><literal>PUT</literal></entry>
              <entry>更新已有资源的属性。也用来调用现存资源的功能。</entry>
            </row>
            <row>
              <entry><literal>DELETE</literal></entry>
              <entry>删除现存资源。</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
      <table>
        <title>HTTP方法响应代码</title>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>响应</entry>
              <entry>描述</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry><literal>200 - Ok</literal></entry>
              <entry>操作成功，响应返回（<literal>GET</literal>和<literal>PUT</literal>请求）。</entry>
            </row>
            <row>
              <entry><literal>201 - Created</literal></entry>
              <entry>操作成功，实体已创建，并返回到响应体中（<literal>POST</literal>请求）。</entry>
            </row>
            <row>
              <entry><literal>204 - No content</literal></entry>
              <entry>操作成功，实体已删除，不会返回响应体（<literal>DELETE</literal>请求）。</entry>
            </row>
            <row>
              <entry><literal>401 - Unauthorized</literal></entry>
              <entry>操作失败。操作要求设置Authentication头部。如果请求中已经设置了头部，对应的凭证是无效的或者用户不允许执行这个操作。</entry>
            </row>
            <row>
              <entry><literal>403 - Forbidden</literal></entry>
              <entry>禁止操作，不要重试。这不是认证和授权的问题，这是禁止操作。比如：删除一个执行中流程的任务是不允许的，无论用户或流程任务的状态。</entry>
            </row>
            <row>
              <entry><literal>404 - Not found</literal></entry>
              <entry>操作失败。找不到请求的资源。</entry>
            </row>
            <row>
              <entry><literal>405 - Method not allowed</literal></entry>
              <entry>操作失败。使用的资源方法不允许调用。比如：想更新（PUT）已部署的资源会返回<literal>405</literal>结果。</entry>
            </row>
            <row>
              <entry><literal>409 - Conflict</literal></entry>
              <entry>操作失败。更新其他操作应更新的资源，会导致更新不合法。也可以表示一个结合中新创建的资源的id已经存在了。</entry>
            </row>
            <row>
              <entry><literal>415 - Unsupported Media Type</literal></entry>
              <entry>操作失败。请求体包含了不支持的媒体类型。当请求体的JSON中包含未知的属性或值时，也会返回这个响应，一般是因为无法处理的错误格式或类型。</entry>
            </row>
            <row>
              <entry><literal>500 - Internal server error</literal></entry>
              <entry>操作失败。执行操作时出现了预期外的异常。响应体中包含错误的细节。</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
        <para>
		media-type和HTTP响应永远都是<literal>application/json</literal>，除非需要使用二进制内容（比如：发布资源数据），会使用内容的media-type。
        </para>
    </section>
    <section>
      <title>错误响应体</title>
      <para>当发生错误时（包括客户端和服务端，4XX和5XX状态码），响应体会包含描述发生的错误的描述。
	  下面是任务不存在时出现的404状态：</para>
                  <programlisting>
{
  "statusCode" : 404,
  "errorMessage" : "Could not find a task with id '444'."
}</programlisting>
    </section>
    <section>
      <title>请求参数</title>
      <section>
        <title>URL片段</title>
        <para>
			url上的参数（比如<literal>http://host/actviti-rest/service/repository/deployments/{deploymentId}</literal>上的deploymentId）
			都需要转义（参考<ulink url="https://en.wikipedia.org/wiki/Percent-encoding">URL编码或百分号编码</ulink>来解决特殊字符问题）。
			大多数框架都有这种内置功能，但我们也要把这个问题考虑在内。特别是对于可能包含前斜线（比如，部署资源）的情况，这就是必须的。
        </para>
      </section>

      <section>
        <title>Rest URL查询参数</title>
        <para>
			设置在URL中的查询参数（比如，<literal>http://host/activiti-rest/service/deployments?name=Deployment</literal>中的name参数）
			可以使用以下类型，它们对应着以下REST-API文档：

            <table>
              <title>URL查询参数类型</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>类型</entry>
                    <entry>格式</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>String</entry>
                    <entry>纯文本参数。可以包含任何URL允许的合法的字符。对于<literal>XXXLike</literal>参数，字符串应该包含通配符<literal>%</literal>（还要通过url编码）。这可以指定模糊搜索的意图。比如'<literal>Tas%</literal>'匹配所有以'Tas'开头的值。</entry>
                  </row>
                  <row>
                    <entry>Integer</entry>
                    <entry>整数参数。只能包含非小数的整数值，在-2.147.483.648与2.147.483.647之间。</entry>
                  </row>
                  <row>
                    <entry>Long</entry>
                    <entry>长整形参数。只能包含非小树的长整形值，在-9.223.372.036.854.775.808与9.223.372.036.854.775.807之间。</entry>
                  </row>
                  <row>
                    <entry>Boolean</entry>
                    <entry>布尔类型参数。可以是<literal>true</literal>或<literal>false</literal>。如果使用了其他值，会返回'<literal>405 - Bad request</literal>'响应。</entry>
                  </row>
                  <row>
                    <entry>Date</entry>
                    <entry>日期类型。使用ISO-8601日期格式（参考<ulink url="http://en.wikipedia.org/wiki/ISO_8601">维基百科上的ISO-8601</ulink>），
					用于时间和日期组件（比如<literal>2013-04-03T23:45Z</literal>）。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
        </para>
      </section>
      <section id="restJsonBody">
        <title>JSON内容参数</title>
        <para>
            <table>
              <title>JSON参数类型</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>类型</entry>
                    <entry>格式</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>String</entry>
                    <entry>纯文本参数。可以包含任何URL允许的合法的字符。对于<literal>XXXLike</literal>参数，字符串应该包含通配符<literal>%</literal>（还要通过url编码）。这可以指定模糊搜索的意图。比如'<literal>Tas%</literal>'匹配所有以'Tas'开头的值。</entry>
                  </row>
                  <row>
                    <entry>Integer</entry>
                    <entry>整数参数，JSON数字。只能包含非小数的整数值，在-2.147.483.648与2.147.483.647之间。</entry>
                  </row>
                  <row>
                    <entry>Long</entry>
                    <entry>长整形参数，JSON数字。只能包含非小树的长整形值，在-9.223.372.036.854.775.808与9.223.372.036.854.775.807之间。</entry>
                  </row>
                  <row>
                    <entry>Boolean</entry>
                    <entry>布尔类型参数，JSON布尔。可以是<literal>true</literal>或<literal>false</literal>。如果使用了其他值，会返回'<literal>405 - Bad request</literal>'响应。</entry>
                  </row>
                  <row>
                    <entry>Date</entry>
                    <entry>日期类型，JSON文本。使用ISO-8601日期格式（参考<ulink url="http://en.wikipedia.org/wiki/ISO_8601">维基百科上的ISO-8601</ulink>），
					用于时间和日期组件（比如<literal>2013-04-03T23:45Z</literal>）。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
        </para>
      </section>
      <section id="restPagingAndSort">
        <title>分页与排序</title>
        <para>
			分页与排序参数可以添加到URL的query-string中（比如<literal>http://host/activiti-rest/service/deployments?sort=name</literal>中的name参数）。
            <table>
              <title>查询JSON参数</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>默认值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>sort</entry>
                    <entry>根据查询实现而不同</entry>
                    <entry>查询的名称，对于不同的查询实现，默认值也不同。</entry>
                  </row>
                  <row>
                    <entry>order</entry>
                    <entry>asc</entry>
                    <entry>排序的方式，可以为'asc'或'desc'。</entry>
                  </row>
                  <row>
                    <entry>start</entry>
                    <entry>0</entry>
                    <entry>分页查询开始的值，默认从0开始。</entry>
                  </row>
                  <row>
                    <entry>size</entry>
                    <entry>10</entry>
                    <entry>分页查询每页显示的记录数。默认为10。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
        </para>
      </section>

      <section id="restQueryVariable">
        <title>JSON查询变量格式</title>
        <para>
            <programlisting>
{
  "name" : "variableName",
  "value" : "variableValue",
  "operation" : "equals",
  "type" : "string"
}</programlisting>
            <table>
              <title>查询JSON参数</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>查询包含的变量名称。在一些查询中使用'<literal>equals</literal>'查询对应资源的<emphasis role="bold">所有值</emphasis>时，可以为空。</entry>
                  </row>
                  <row>
                    <entry>value</entry>
                    <entry>是</entry>
                    <entry>查询包含的变量值，要包含给定类型的正确格式。</entry>
                  </row>
                  <row>
                    <entry>operation</entry>
                    <entry>是</entry>
                    <entry>查询使用的参数，可以是以下值： <literal>equals, notEquals, equalsIgnoreCase, notEqualsIgnoreCase, lessThan, greaterThan, lessThanOrEquals, greaterThanOrEquals</literal>和<literal>like</literal>。</entry>
                  </row>
                  <row>
                    <entry>type</entry>
                    <entry>否</entry>
                    <entry>使用的变量的类型。如果省略，类型会根据<literal>value</literal>参数决定。所以JSON文本值都会认为是<literal>string</literal>类型，JSON布尔对应<literal>boolean</literal>，JSON数字根据数字的长度对应<literal>long</literal>或<literal>integer</literal>。在不确定时，建议使用精确的类型。下面列出了不稳定支持的其他类型。
                    </entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
             <table>
              <title>默认查询JSON类型</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>类型名称</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>string</entry>
                    <entry>对应<literal>java.lang.String</literal>.</entry>
                  </row>
                  <row>
                    <entry>short</entry>
                    <entry>对应<literal>java.lang.Integer</literal>.</entry>
                  </row>
                  <row>
                    <entry>integer</entry>
                    <entry>对应<literal>java.lang.Integer</literal>.</entry>
                  </row>
                  <row>
                    <entry>long</entry>
                    <entry>对应<literal>java.lang.Long</literal>.</entry>
                  </row>
                  <row>
                    <entry>double</entry>
                    <entry>对应<literal>java.lang.Double</literal>.</entry>
                  </row>
                  <row>
                    <entry>boolean</entry>
                    <entry>对应<literal>java.lang.Boolean</literal>.</entry>
                  </row>
                  <row>
                    <entry>date</entry>
                    <entry>对应<literal>java.util.Date</literal>。JSON字符串会使用ISO-8601格式进行转换。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
        </para>
      </section>

      <section id="restVariables">
        <title>变量格式</title>
        <para>
		  在使用变量时（执行，流程和任务），REST-api使用一些通用原则和JSON格式实现读写。
		  变量的JSON格式看起来如下所示：
           <programlisting>
{
  "name" : "variableName",
  "value" : "variableValue",
  "valueUrl" : "http://...",
  "scope" : "local",
  "type" : "string"
}</programlisting>

           <table>
              <title>变量JSON属性</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>name</entry>
                    <entry>是</entry>
                    <entry>变量名称。</entry>
                  </row>
                  <row>
                    <entry>value</entry>
                    <entry>否</entry>
                    <entry>变量值。写入变量时，如果没有设置<literal>value</literal>，会认为值是<literal>null</literal>。</entry>
                  </row>
                  <row>
                    <entry>valueUrl</entry>
                    <entry>否</entry>
                    <entry>当读取变量的类型为<literal>binary</literal>或<literal>serializable</literal>时，这个属性会指向获取原始二进制数据的URL。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>否</entry>
                    <entry>变量的范围。如果为'<literal>local</literal>'，变量会对应到请求的资源。如果为'<literal>global</literal>'，变量会定义到请求资源的上级（或上级树的任何上级）。当写入变量，没有设置scope时，假设使用<literal>global</literal>。</entry>
                  </row>
                  <row>
                    <entry>type</entry>
                    <entry>否</entry>
                    <entry>变量类型。参考下面的表格对类型的描述。当写入变量，没有设置类型时，会根据请求的JSON属性来推断它的类型，限制为<literal>string</literal>，<literal>double</literal>，<literal>integer</literal>和<literal>boolean</literal>。如果不确定会用到的类型，建议还是要设置一个类型。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
            <table>
              <title>变量类型</title>
              <tgroup cols="2">
                <thead>
                  <row>
                    <entry>类型名</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>string</entry>
                    <entry>对应<literal>java.lang.String</literal>。写入时使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>integer</entry>
                    <entry>对应<literal>java.lang.Integer</literal>。写入时，先使用JSON数进行字转换，如果失败就使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>short</entry>
                    <entry>对应<literal>java.lang.Short</literal>。写入时，先使用JSON数字进行转换，如果失败就使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>long</entry>
                    <entry>对应<literal>java.lang.Long</literal>。写入时，先使用JSON数字进行转换，如果失败就使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>double</entry>
                    <entry>对应<literal>java.lang.Double</literal>。写入时，先使用JSON数字进行转换，如果失败就使用JSON文本。</entry>
                  </row>
                  <row>
                    <entry>boolean</entry>
                    <entry>对应<literal>java.lang.Boolean</literal>。写入时，使用JSON布尔进行转换。</entry>
                  </row>
                  <row>
                    <entry>date</entry>
                    <entry>对应<literal>java.util.Date</literal>。写入时，使用ISO-8601日期格式转换为JSON文本。</entry>
                  </row>
                  <row>
                    <entry>binary</entry>
                    <entry>二进制变量，对应字节数组。<literal>value</literal>属性为null，<literal>valueUrl</literal>包含指向原始二进制流的URL。</entry>
                  </row>
                  <row>
                    <entry>serializable</entry>
                    <entry>可序列化的Java对象序列化后的结果。和<literal>binary</literal>类型相同，<literal>value</literal>属性为null，<literal>valueUrl</literal>包含指向原始二进制流的URL。所有可以序列化变量（上面不包含的类型）都会使用这个类型。</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
			可以通过自定义JSON格式来支持更多变量类型（无论是简单数值或复杂/内嵌JSON对象）。
			扩展<literal>org.activiti.rest.api.RestResponseFactory</literal>的<literal>initializeVariableConverters()</literal>方法，
			你可以添加自定义的<literal>org.activiti.rest.api.service.engine.variable.RestVariableConverter</literal>类来支持POJO与对应REST数据的相互转换。实际的JSON转换是通过Jackson实现的。
        </para>
       </section>
    </section>

  </section>
  <section>
    <title>部署</title>
    <para><emphasis role="bold">如果使用tomcat，请参考<link linkend="restUsageInTomcat">tomcat用法</link>。</emphasis></para>
     <section>
      <title>部署列表</title>
        <para>
          <programlisting>GET repository/deployments</programlisting>
        </para>
        <para>
            <table>
              <title>URL查询参数</title>
              <tgroup cols='3'>
                <colspec colname="c1"/>
                <colspec colname="c2"/>
                <colspec colname="c3"/>
                <colspec colname="c4"/>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定名称的部署。</entry>
                  </row>
                  <row>
                    <entry>nameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回名称与指定值相似的部署。</entry>
                  </row>
                  <row>
                    <entry>category</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定分类的部署。</entry>
                  </row>
                  <row>
                    <entry>categoryNotEquals</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定分类不同的部署。</entry>
                  </row>
                  <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的部署。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的部署。</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回没有设置tenantId的部署。如果为 <literal>false</literal>，忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>'id'（默认），'name'，'deploytime'或'tenantId'</entry>
                    <entry>排序属性，与'order'一起使用。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>通用的<link linkend="restPagingAndSort">分页和排序查询参数</link>都可以使用。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>REST响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "data": [
    {
      "id": "10",
      "name": "activiti-examples.bar",
      "deploymentTime": "2010-10-13T14:54:26.750+02:00",
      "category": "examples",
      "url": "http://localhost:8081/service/repository/deployments/10",
	  "tenantId": null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
    </para>
    </section>

    <section>
      <title>获得一个部署</title>
        <para>
          <programlisting>GET repository/deployments/{deploymentId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个部署 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取部署的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得一个部署 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了部署，并返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的部署。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples",
  "url": "http://localhost:8081/service/repository/deployments/10",
  "tenantId" : null
}</programlisting>
    </para>
    </section>

    <section>
      <title>创建新部署</title>
        <para>
          <programlisting>POST repository/deployments</programlisting>
        </para>
        <para>
          <emphasis role="bold">请求体：</emphasis>
        </para>
        <para>请求体包含的数据类型应该是<emphasis>multipart/form-data</emphasis>。请求里应该只包含一个文件，其他额外的任务都会被忽略。
		部署的名称就是文件域的名称。如果需要在一个部署中包含多个资源，把这些文件压缩成zip包，并要确认文件名是以<literal>.bar</literal>或<literal>.zip</literal>结尾。</para>
        <para>可以在请求体中传递一个额外的参数（表单域） <literal>tenantId</literal>。字段的值会用来设置部署的租户id。</para>
      <para>
          <table>
              <title>创建新部署 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示部署已经创建了。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示请求内没有内容，或部署不支持内容的mime-type。在状态描述中包含更新信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": null,
  "url": "http://localhost:8081/service/repository/deployments/10",
  "tenantId" : "myTenant"
}</programlisting>
    </para>
  </section>
      <section>
      <title>删除部署</title>
        <para>
          <programlisting>DELETE repository/deployments/{deploymentId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除部署 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>删除的部署id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除部署 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了部署并已经删除。响应体为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示没有找到请求的部署。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>列出部署内的资源</title>
        <para>
          <programlisting>GET repository/deployments/{deploymentId}/resources</programlisting>
        </para>
        <para>
            <table>
              <title>列出部署内的资源 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取资源的部署id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>列出部署内的资源 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了部署，并返回了资源列表。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的部署。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "id": "diagrams/my-process.bpmn20.xml",
    "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/diagrams%2Fmy-process.bpmn20.xml",
    "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/diagrams%2Fmy-process.bpmn20.xml",
    "mediaType": "text/xml",
    "type": "processDefinition"
  },
  {
    "id": "image.png",
    "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/image.png",
    "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/image.png",
    "mediaType": "image/png",
    "type": "resource"
  }
]</programlisting>

       <itemizedlist>
        <listitem>
          <para><literal>mediaType</literal>：包含资源的media-type。这是使用（可插拔的）<literal>MediaTypeResolver</literal>处理的，默认已经支持了一些有限的mime-type映射。</para>
        </listitem>
         <listitem>
          <para><literal>type</literal>：资源类型，可能值为：</para>
           <itemizedlist>
            <listitem>
              <para><literal>resource</literal>：原始资源。</para>
            </listitem>
             <listitem>
              <para><literal>processDefinition</literal>：包含一个或多个流程定义的资源。它会被发布器处理。</para>
            </listitem>
             <listitem>
              <para><literal>processImage</literal>：展示一个已发布流程定义的图形布局。</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </para>
    <para>
      <emphasis>结果json中的dataUrl属性包含了用来获取二进制资源的真实URL。</emphasis>
    </para>
  </section>
  <section>
      <title>获取部署资源</title>
        <para>
          <programlisting>GET repository/deployments/{deploymentId}/resources/{resourceId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取部署资源 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>部署ID是请求资源的一部分。</entry>
                  </row>
                   <row>
                    <entry>resourceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取资源的ID <emphasis role="bold">确保URL对资源ID进行编码的情况下，包含斜杠，例如：使用'diagrams%2Fmy-process.bpmn20.xml' 代替 'diagrams/Fmy-process.bpmn20.xml'。</emphasis></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取部署资源 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示部署和资源都已经找到并且部署的资源已经成功返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示请求的部署并没有找到或者目前的部署对象并没有该资源ID。状态描述还包含一些额外信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id": "diagrams/my-process.bpmn20.xml",
  "url": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resources/diagrams%2Fmy-process.bpmn20.xml",
  "dataUrl": "http://localhost:8081/activiti-rest/service/repository/deployments/10/resourcedata/diagrams%2Fmy-process.bpmn20.xml",
  "mediaType": "text/xml",
  "type": "processDefinition"
}</programlisting>

      <itemizedlist>
        <listitem>
		  <para><literal>mediaType</literal>：包含资源的media-type。这是使用（可插拔的）<literal>MediaTypeResolver</literal>处理的，默认已经支持了一些有限的mime-type映射。</para>
        </listitem>
         <listitem>
          <para><literal>type</literal>: 资源类型，可能的值</para>
           <itemizedlist>
            <listitem>
              <para><literal>resource</literal>: 原始资源.</para>
            </listitem>
             <listitem>
              <para><literal>processDefinition</literal>: 包含一个或多个流程定义的资源。它会被发布器处理。</para>
            </listitem>
             <listitem>
              <para><literal>processImage</literal>: 展示一个已发布流程定义的图形布局。</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>
    </para>
  </section>

   <section>
      <title>获取部署资源的内容</title>
        <para>
          <programlisting>GET repository/deployments/{deploymentId}/resourcedata/{resourceId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取部署资源的内容 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>部署ID是请求资源的一部分。</entry>
                  </row>
                   <row>
                    <entry>resourceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>资源ID获取数据 <emphasis role="bold">确保URL对资源ID进行编码的情况下，包含斜杠，例如：使用'diagrams%2Fmy-process.bpmn20.xml' 代替 'diagrams/Fmy-process.bpmn20.xml'</emphasis></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取部署资源的内容 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示部署和资源都已经找到并且部署的资源已经成功返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示请求的部署并没有找到或者目前的部署对象并没有该资源ID。状态描述还包含一些额外信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
    </para>
    <para>根据请求的资源响应体将包含二进制的资源内容。响应体的content-type的'mimeType'属性将会和资源的返回类型相同。同样，响应头设置content-disposition，允许浏览器下载该文件而不是去显示它。
    </para>
  </section>
 </section>
 <section>

  <title>流程定义</title>

   <section>
      <title>流程定义列表</title>
        <para>
          <programlisting>GET repository/process-definitions</programlisting>
        </para>
        <para>
            <table>
              <title>流程定义列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>version</entry>
                    <entry>否</entry>
                    <entry>integer</entry>
                    <entry>只返回给定版本的流程定义。</entry>
                  </row>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定名称的流程定义。</entry>
                  </row>
                  <row>
                    <entry>nameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定名称匹配的流程定义。</entry>
                  </row>
                  <row>
                    <entry>key</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定key的流程定义。</entry>
                  </row>
                  <row>
                    <entry>keyLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定key匹配的流程定义。</entry>
                  </row>
                  <row>
                    <entry>resourceName</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定资源名称的流程定义。</entry>
                  </row>
                  <row>
                    <entry>resourceNameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定资源名称匹配的流程定义。</entry>
                  </row>
                  <row>
                    <entry>category</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定分类的流程定义。</entry>
                  </row>
                  <row>
                    <entry>categoryLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定分类匹配的流程定义。</entry>
                  </row>
                  <row>
                    <entry>categoryNotEquals</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回非给定分类的流程定义。</entry>
                  </row>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回包含在与给定id一致的部署中的流程定义。</entry>
                  </row>
                  <row>
                    <entry>startableByUser</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回给定用户可以启动的流程定义。</entry>
                  </row>
                  <row>
                    <entry>latest</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>只返回最新的流程定义版本。只能与'key'或'keyLike'参数一起使用，如果使用了其他参数会返回400的响应。</entry>
                  </row>
                  <row>
                    <entry>suspended</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为<literal>true</literal>，只返回挂起的流程定义。如果为<literal>false</literal>，只返回活动的（未挂起）的流程定义。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>'name'（默认），'id'，'key'，'category'，'deploymentId'和'version'</entry>
                    <entry>排序的属性，可以与'order'一起使用。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>也可以使用通用的<link linkend="restPagingAndSort">分页与排序查询参数</link>。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>流程定义列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，流程定义已返回。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递的参数格式错误，或'latest'与'key'，'keyLike'之外的其他参数一起使用了。状态信息包含更多信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "data": [
    {
      "id" : "oneTaskProcess:1:4",
      "url" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "version" : 1,
      "key" : "oneTaskProcess",
      "category" : "Examples",
      "suspended" : false,
      "name" : "The One Task Process",
      "description" : "This is a process for testing purposes",
      "deploymentId" : "2",
      "deploymentUrl" : "http://localhost:8081/repository/deployments/2",
      "graphicalNotationDefined" : true,
      "resource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.xml",
      "diagramResource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.png",
      "startFormDefined" : false
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      <itemizedlist>
          <listitem>
            <para><literal>graphicalNotationDefined</literal>：表示流程定义包含图形信息（BPMN DI）。</para>
          </listitem>
          <listitem>
            <para><literal>resource</literal>：包含实际部署的BPMN 2.0 xml。</para>
          </listitem>
          <listitem>
            <para><literal>diagramResource</literal>：包含流程的图形内容，如果没有图形就返回null。</para>
          </listitem>
      </itemizedlist>
    </para>
    </section>
   <section>
      <title>获得一个流程定义</title>
        <para>
          <programlisting>GET repository/process-definitions/{processDefinitionId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个流程定义 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获取的流程定义的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得一个流程定义 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程定义，并返回了结果。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id" : "oneTaskProcess:1:4",
  "url" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "version" : 1,
  "key" : "oneTaskProcess",
  "category" : "Examples",
  "suspended" : false,
  "name" : "The One Task Process",
  "description" : "This is a process for testing purposes",
  "deploymentId" : "2",
  "deploymentUrl" : "http://localhost:8081/repository/deployments/2",
  "graphicalNotationDefined" : true,
  "resource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.xml",
  "diagramResource" : "http://localhost:8182/repository/deployments/2/resources/testProcess.png",
  "startFormDefined" : false
}</programlisting>
      <itemizedlist>
          <listitem>
            <para><literal>graphicalNotationDefined</literal>：表示流程定义包含图形信息（BPMN DI）。</para>
          </listitem>
          <listitem>
            <para><literal>resource</literal>：包含实际部署的BPMN 2.0 xml。</para>
          </listitem>
          <listitem>
            <para><literal>diagramResource</literal>：包含流程的图形内容，如果没有图形就返回null。</para>
          </listitem>
      </itemizedlist>
    </para>
    </section>

    <section>
      <title>更新流程定义的分类</title>
        <para>
          <programlisting>PUT repository/process-definitions/{processDefinitionId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求的JSON：</emphasis>
           <programlisting>
{
  "category" : "updatedcategory"
}</programlisting>
        </para>
        <para>
          <table>
              <title>更新流程定义的分类 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示已经修改了流程的分类。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示请求体中没有传递分类。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>参考<literal>repository/process-definitions/{processDefinitionId}</literal>.
      </para>
 </section>
     <section>
      <title>获得一个流程定义的资源内容</title>
        <para>
          <programlisting>GET repository/process-definitions/{processDefinitionId}/resourcedata</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个流程定义的资源内容 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>期望获得资源数据的流程定义的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">响应：</emphasis>
    </para>
    <para>
      与 <literal>GET repository/deployment/{deploymentId}/resourcedata/{resourceId}</literal>的响应码和响应体完全一致。
    </para>
  </section>

   <section>
      <title>获得流程定义的BPMN模型</title>
        <para>
          <programlisting>GET repository/process-definitions/{processDefinitionId}/model</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程定义的BPMN模型 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>期望获得模型的流程定义的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程定义的BPMN模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示已找到流程定义，并返回了模型。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">响应体：</emphasis>
       响应体是一个转换为JSON格式的<literal>org.activiti.bpmn.model.BpmnModel</literal>，包含整个流程定义模型。
<programlisting>
{
   "processes":[
      {
         "id":"oneTaskProcess",
         "xmlRowNumber":7,
         "xmlColumnNumber":60,
         "extensionElements":{

         },
         "name":"The One Task Process",
         "executable":true,
         "documentation":"One task process description",

         ...
    ],

    ...
}
</programlisting>
    </para>
    <para>

    </para>
  </section>

  <section>
      <title>暂停流程定义</title>
        <para>
          <programlisting>PUT repository/process-definitions/{processDefinitionId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "action" : "suspend",
  "includeProcessInstances" : "false",
  "date" : "2013-04-15T00:42:12Z"
}</programlisting>
        <table id="processDefinitionActionBodyParameters">
              <title>暂停流程定义 - 请求的JSON参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>描述</entry>
                    <entry>是否必须</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>action</entry>
                    <entry>执行的动作。<literal>activate</literal> 或 <literal>suspend</literal>。</entry>
                    <entry>是</entry>
                  </row>
                  <row>
                    <entry>includeProcessInstances</entry>
                    <entry>是否把流程定义下正在运行的流程时也暂停或激活。如果忽略，就不改变流程实例的状态。</entry>
                    <entry>否</entry>
                  </row>
                  <row>
                    <entry>date</entry>
                    <entry>执行暂停或激活的日期（ISO-8601格式）。如果忽略，会立即执行暂停或激活。</entry>
                    <entry>否</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>暂停流程定义 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示暂停流程成功。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示请求的流程定义已经暂停了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考 <literal>repository/process-definitions/{processDefinitionId}</literal>的响应。
      </para>
 </section>
   <section>
      <title>激活流程定义</title>
        <para>
          <programlisting>PUT repository/process-definitions/{processDefinitionId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "action" : "activate",
  "includeProcessInstances" : "true",
  "date" : "2013-04-15T00:42:12Z"
}</programlisting>

        参考暂停流程定义的 <link linkend="processDefinitionActionBodyParameters">JSON参数</link>。
        </para>
        <para>
          <table>
              <title>激活流程定义 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示激活流程成功。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示请求的流程定义已经激活了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考 <literal>repository/process-definitions/{processDefinitionId}</literal>的响应。
      </para>
 </section>

  <section>
      <title>获得流程定义的所有候选启动者</title>
        <para>
          <programlisting>GET repository/process-definitions/{processDefinitionId}/identitylinks</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程定义的所有候选启动者 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>期望获得IdentityLink的流程定义id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程定义的所有候选启动者 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示已找到流程定义，并返回了请求的IdentityLink。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程定义。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/groups/admin",
      "user":null,
      "group":"admin",
      "type":"candidate"
   },
   {
      "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
      "user":"kermit",
      "group":null,
      "type":"candidate"
   }
]</programlisting>
    </para>
  </section>
  <section>
      <title>为流程定义添加一个候选启动者</title>
      <para>
        <programlisting>POST repository/process-definitions/{processDefinitionId}/identitylinks</programlisting>
      </para>
      <para>
          <table>
            <title>为流程定义添加一个候选启动者 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>流程定义的id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
       <emphasis role="bold">请求体（用户）：</emphasis>
            <programlisting>
{
  "user" : "kermit"
}</programlisting>
    </para>
    <para>
       <emphasis role="bold">请求体（组）：</emphasis>
            <programlisting>
{
  "groupId" : "sales"
}</programlisting>
    </para>
      <para>
        <table>
            <title>为流程定义添加一个候选启动者 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>201</entry>
                  <entry>表示找到了流程定义，并创建了IdentityLink。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到请求的流程定义。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</programlisting>
    </para>
 </section>

  <section>
      <title>删除流程定义的候选启动者</title>
      <para>
        <programlisting>DELETE repository/process-definitions/{processDefinitionId}/identitylinks/{family}/{identityId}</programlisting>
      </para>
      <para>
          <table>
            <title>删除流程定义的候选启动者 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>流程定义的id。</entry>
                </row>
                <row>
                  <entry>family</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry><literal>users</literal> 或 <literal>groups</literal>，依赖IdentityLink的类型。</entry>
                </row>
                <row>
                  <entry>identityId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>需要删除的候选创建者的身份的userId 或 groupId。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>删除流程定义的候选启动者 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>204</entry>
                  <entry>表示找到了流程定义，并删除了IdentityLink。响应体为空。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到请求的流程定义，或者在流程定义中找不到与url匹配的IdentityLink。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</programlisting>
    </para>
    </section>

     <section>
      <title>获得流程定义的一个候选启动者</title>
      <para>
        <programlisting>GET repository/process-definitions/{processDefinitionId}/identitylinks/{family}/{identityId}</programlisting>
      </para>
      <para>
          <table>
            <title>获得流程定义的一个候选启动者 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>流程定义的id。</entry>
                </row>
                <row>
                  <entry>family</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry><literal>users</literal> 或 <literal>groups</literal>，依赖IdentityLink的类型。</entry>
                </row>
                <row>
                  <entry>identityId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>用来获得候选启动者的身份的userId 或 groupId。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>获得流程定义的一个候选启动者 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示找到了流程定义，并返回了IdentityLink。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到请求的流程定义，或者在流程定义中找不到与url匹配的IdentityLink。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "url":"http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4/identitylinks/users/kermit",
  "user":"kermit",
  "group":null,
  "type":"candidate"
}</programlisting>
    </para>
    </section>

 </section>

 <section>
  <title>模型</title>

   <section>
      <title>获得模型列表</title>
        <para>
          <programlisting>GET repository/models</programlisting>
        </para>
        <para>
            <table>
              <title>获得模型列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>指返回指定id的模型。</entry>
                  </row>
                  <row>
                    <entry>category</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定分类的模型。</entry>
                  </row>
                   <row>
                    <entry>categoryLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与给定分类匹配的模型。使用<literal>%</literal>作为通配符。</entry>
                  </row>
                   <row>
                    <entry>categoryNotEquals</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回非指定分类的模型。</entry>
                  </row>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定名称的模型。</entry>
                  </row>
                   <row>
                    <entry>nameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定名称匹配的模型。使用<literal>%</literal>作为通配符。</entry>
                  </row>
                  <row>
                    <entry>key</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定key的模型。</entry>
                  </row>
                  <row>
                    <entry>deploymentId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回包含在指定部署包中的模型。</entry>
                  </row>
                  <row>
                    <entry>version</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>只返回指定版本的模型。</entry>
                  </row>
                  <row>
                    <entry>latestVersion</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回最新版本的模型。最好与<literal>key</literal>一起使用。如果为 <literal>false</literal>，就会返回所有版本。</entry>
                  </row>
                  <row>
                    <entry>deployed</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回已部署的模型。如果为 <literal>false</literal>，只返回未部署的模型（deploymentId为null）。</entry>
                  </row>
                   <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的模型。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的模型。</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回没有设置tenantId的模型。如果为 <literal>false</literal>，会忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>'id' (默认), 'category', 'createTime', 'key', 'lastUpdateTime', 'name'，'version'或'tenantId'</entry>
                    <entry>排序的字段，和'order'一起使用。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link>。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得模型列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了模型</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递的参数格式错误。状态信息中包含更多信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "name":"Model name",
         "key":"Model key",
         "category":"Model category",
         "version":2,
         "metaInfo":"Model metainfo",
         "deploymentId":"7",
         "id":"10",
         "url":"http://localhost:8182/repository/models/10",
         "createTime":"2013-06-12T14:31:08.612+0000",
         "lastUpdateTime":"2013-06-12T14:31:08.612+0000",
         "deploymentUrl":"http://localhost:8182/repository/deployments/7",
		 "tenantId":null
      },

      ...

   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>

    <section>
      <title>获得一个模型</title>
        <para>
          <programlisting>GET repository/models/{modelId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个模型 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>modelId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得的模型id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得一个模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并成功返回了。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000",
   "tenantId":null
}</programlisting>
    </para>
    </section>

 <section>
      <title>更新模型</title>
        <para>
          <programlisting>PUT repository/models/{modelId}</programlisting>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "tenantId":"updatedTenant"
}</programlisting>
   所有请求参数都是可选的。比如，你可以只在请求体的JSON对象中包含'name'属性，只更新模型的名称，这样其他的字段都不会受到影响。如果显示包含了一个属性，并设置为null，模型值会被更新为null。比如：<literal>{"metaInfo" : null}</literal>会清空模型的metaInfo。
    </para>
        <para>
          <table>
              <title>更新模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型，并成功更新。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":2,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000",
   "tenantId":""updatedTenant"
}</programlisting>
    </para>
    </section>

    <section>
      <title>新建模型</title>
        <para>
          <programlisting>POST repository/models</programlisting>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":1,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "tenantId":"tenant"
}</programlisting>
   All request values are optional. For example, you can only include the 'name' attribute in the request body JSON-object, only setting the name of the model, leaving all other fields null.
    </para>
        <para>
          <table>
              <title>新建模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功创建了模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/repository/models/5",
   "name":"Model name",
   "key":"Model key",
   "category":"Model category",
   "version":1,
   "metaInfo":"Model metainfo",
   "deploymentId":"2",
   "deploymentUrl":"http://localhost:8182/repository/deployments/2",
   "createTime":"2013-06-12T12:31:19.861+0000",
   "lastUpdateTime":"2013-06-12T12:31:19.861+0000",
   "tenantId":"tenant"
}</programlisting>
    </para>
    </section>

      <section>
      <title>删除模型</title>
        <para>
          <programlisting>DELETE repository/models/{modelId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除模型 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>modelId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的模型id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除模型 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了模型并成功删除。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>获得模型的可编译源码</title>
        <para>
          <programlisting>GET repository/models/{modelId}/source</programlisting>
        </para>
        <para>
            <table>
              <title>获得模型的可编译源码 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>modelId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>模型id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得模型的可编译源码 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并返回了源码。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
       响应体包含了模型的原始可编译源码。无论源码的内容是什么，响应的content-type都设置为<literal>application/octet-stream</literal>。
    </para>
    </section>

    <section>
      <title>设置模型的可编辑源码</title>
         <para>
        <programlisting>PUT repository/models/{modelId}/source</programlisting>
      </para>
      <para>
          <table>
            <title>设置模型的可编辑源码 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>modelId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>模型的id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。
        </para>
        <para>
          <table>
              <title>设置模型的可编辑源码 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并更新了源码。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">成功响应体：</emphasis>
       响应体包含了模型的原始可编译源码。无论源码的内容是什么，响应的content-type都设置为<literal>application/octet-stream</literal>。
    </para>
  </section>

      <section>
      <title>获得模型的附加可编辑源码</title>
        <para>
          <programlisting>GET repository/models/{modelId}/source-extra</programlisting>
        </para>
        <para>
            <table>
              <title>获得模型的附加可编辑源码 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>modelId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>模型id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得模型的附加可编辑源码 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并返回了源码。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
       响应体包含了模型的原始可编译源码。无论附加源码的内容是什么，响应的content-type都设置为<literal>application/octet-stream</literal>。
    </para>
    </section>

    <section>
      <title>设置模型的附加可编辑源码</title>
         <para>
        <programlisting>PUT repository/models/{modelId}/source-extra</programlisting>
      </para>
      <para>
          <table>
            <title>设置模型的附加可编辑源码 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>modelId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>模型id</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容
        </para>
        <para>
          <table>
              <title>设置模型的附加可编辑源码 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了模型并更新了附加源码。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的模型。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">成功响应体：</emphasis>
       响应体包含了模型的原始可编译源码。无论附加源码的内容是什么，响应的content-type都设置为<literal>application/octet-stream</literal>。
    </para>
  </section>

 </section>

 <section>
  <title>流程实例</title>

   <section>
      <title>获得流程实例</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例并成功返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask",
   "tenantId": null
}</programlisting>
    </para>
</section>

 <section>
      <title>删除流程实例</title>
        <para>
          <programlisting>DELETE runtime/process-instances/{processInstanceId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除流程实例 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了流程实例并已删除。响应内容为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
</section>

<section>
      <title>激活或挂起流程实例</title>
        <para>
          <programlisting>PUT runtime/process-instances/{processInstanceId}</programlisting>
        </para>
        <para>
            <table>
              <title>激活或挂起流程实例 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望激活或挂起的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求响应体（挂起）：</emphasis>
            <programlisting>
{
   "action":"suspend"
}</programlisting>
    </para>
     <para>
       <emphasis role="bold">请求响应体（激活）：</emphasis>
            <programlisting>
{
   "action":"activate"
}</programlisting>
    </para>
        <para>
          <table>
              <title>激活或挂起流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例并执行了对应操作。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示提供的操作不合法。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                   <row>
                    <entry>409</entry>
                    <entry>表示无法执行请求的流程实例操作，因为流程实例已经激活或挂起了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
</section>

<section>
      <title>启动流程实例</title>
        <para>
          <programlisting>POST runtime/process-instances</programlisting>
        </para>
        <para>
       <emphasis role="bold">请求体（使用流程定义id启动）：</emphasis>
            <programlisting>
{
   "processDefinitionId":"oneTaskProcess:1:158",
   "businessKey":"myBusinessKey",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },

      ...
   ]
}</programlisting>
    </para>
    <para>
       <emphasis role="bold">请求体（使用流程定义key启动）：</emphasis>
            <programlisting>
{
   "processDefinitionKey":"oneTaskProcess",
   "businessKey":"myBusinessKey",
   "tenantId": "tenant1",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },

      ...
   ]
}</programlisting>
    </para>
    <para>
       <emphasis role="bold">请求体（使用message启动）：</emphasis>
            <programlisting>
{
   "message":"newOrderMessage",
   "businessKey":"myBusinessKey",
   "tenantId": "tenant1",
   "variables": [
      {
        "name":"myVar",
        "value":"This is a variable",
      },

      ...
   ]
}</programlisting>
    </para>
    <para>
	请求体中只能使用<literal>processDefinitionId</literal>，<literal>processDefinitionKey</literal>或<literal>message</literal>三者之一。参数<literal>businessKey</literal>，<literal>variables</literal>和<literal>tenantId</literal>都是可选的。
	可以在<link linkend="restVariables">REST变量章节</link>了解更多关于变量格式的信息。注意忽略变量作用域，流程变量总是<literal>local</literal>。
    </para>
        <para>
          <table>
              <title>启动流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功启动了流程实例。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示要么找到不到流程定义（基于id或key），要么指定的message不会启动流程，要么传递了非法的变量。状态描述中包含了错误相关的额外信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask",
   "tenantId" : null
}</programlisting>
    </para>
</section>

<section id="restProcessInstancesGet">
      <title>显示流程实例列表</title>
        <para>
          <programlisting>GET runtime/process-instances</programlisting>
        </para>
        <para>
            <table>
              <title>显示流程实例列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定id的流程实例。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义key的流程实例。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义id的流程实例。</entry>
                  </row>
                  <row>
                    <entry>businessKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定businessKey的流程实例。</entry>
                  </row>
                  <row>
                    <entry>involvedUser</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定用户参与过的流程实例。</entry>
                  </row>
                  <row>
                    <entry>suspended</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回挂起的流程实例。如果为 <literal>false</literal>，只返回未挂起（激活）的流程实例。</entry>
                  </row>
                  <row>
                    <entry>superProcessInstanceId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定上级流程实例id的流程实例（对应call-activity）。</entry>
                  </row>
                  <row>
                    <entry>subProcessInstanceId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定子流程id的流程实例（对方call-activity）。</entry>
                  </row>
                  <row>
                    <entry>excludeSubprocesses</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>只返回非子流程的流程实例。</entry>
                  </row>
                  <row>
                    <entry>includeProcessVariables</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>表示结果中包含流程变量。</entry>
                  </row>
                  <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的流程实例。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的流程实例。</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未设置tenantId的流程实例。如果为 <literal>false</literal>，会忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>排序字段，应该为<literal>id</literal>（默认），<literal>processDefinitionId</literal>，<literal>tenantId</literal> 或 <literal>processDefinitionKey</literal>三者之一。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>可以使用通用的<link linkend="restPagingAndSort">分页和排序查询参数</link>。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>显示流程实例列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了流程实例。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/process-instances/7",
         "businessKey":"myBusinessKey",
         "suspended":false,
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
         "activityId":"processTask",
		 "tenantId" : null
      },

      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>

    <section>
      <title>查询流程实例</title>
        <para>
          <programlisting>POST query/process-instances</programlisting>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
  "processDefinitionKey":"oneTaskProcess",
  "variables":
  [
    {
        "name" : "myVariable",
        "value" : 1234,
        "operation" : "equals",
        "type" : "long"
    },
    ...
  ],
  ...
}</programlisting>

请求体可以包含所有用于<link linkend="restProcessInstancesGet">显示流程实例列表</link>中的查询参数。除此之外，查询条件中也可以使用变量列表，格式<link linkend="restQueryVariable">在此</link>。
    </para>
    <para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link>。</para>
        <para>
          <table>
              <title>查询流程实例 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了流程实例。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/process-instances/7",
         "businessKey":"myBusinessKey",
         "suspended":false,
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
         "activityId":"processTask",
		 "tenantId" : null
      },

      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>

    <section>
      <title>获得流程实例的流程图</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例的流程图 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得流程图的流程实例id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程实例的流程图 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例，并返回了流程图。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示找不到请求的流程实例，流程不包含挺信息（BPMN:DI），所以没有创建图片。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"7",
   "url":"http://localhost:8182/runtime/process-instances/7",
   "businessKey":"myBusinessKey",
   "suspended":false,
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/processOne%3A1%3A4",
   "activityId":"processTask"
}</programlisting>
    </para>
</section>

     <section>
      <title>获得流程实例的参与者</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}/identitylinks</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例的参与者 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>关联的流程实例id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程实例的参与者 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例，并返回了IdentityLink。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
      "user":"john",
      "group":null,
      "type":"customType"
   },
   {
      "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/paul/candidate",
      "user":"paul",
      "group":null,
      "type":"candidate"
   }
]</programlisting>
注意<literal>groupId</literal>总是null，因为只有用户才能实际参与到流程实例中。
    </para>
</section>

<section>
      <title>为流程实例添加一个参与者</title>
        <para>
          <programlisting>POST runtime/process-instances/{processInstanceId}/identitylinks</programlisting>
        </para>
        <para>
            <table>
              <title>为流程实例添加一个参与者 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>关联的流程实例id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
  "userId":"kermit",
  "type":"participant"
}</programlisting>
<literal>userId</literal> 和 <literal>type</literal> 都是必填项。
    </para>
        <para>
          <table>
              <title>为流程实例添加一个参与者 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示找到了流程实例，并创建了关联。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体没有包含userId或type。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
   "user":"john",
   "group":null,
   "type":"customType"
}</programlisting>
注意<literal>groupId</literal>总是null，因为只有用户才能实际参与到流程实例中。
    </para>
</section>

<section>
      <title>删除一个流程实例的参与者</title>
        <para>
          <programlisting>DELETE runtime/process-instances/{processInstanceId}/identitylinks/users/{userId}/{type}</programlisting>
        </para>
        <para>
            <table>
              <title>删除一个流程实例的参与者 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>流程实例id</entry>
                  </row>
                  <row>
                    <entry>userId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>要删除关联的用户id</entry>
                  </row>
                  <row>
                    <entry>type</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>删除的关联类型</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除一个流程实例的参与者 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了流程实例，并删除了关联。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例，或找不到期望删除的关联。响应状态包含了错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "url":"http://localhost:8182/runtime/process-instances/5/identitylinks/users/john/customType",
   "user":"john",
   "group":null,
   "type":"customType"
}</programlisting>
注意<literal>groupId</literal>总是null，因为只有用户才能实际参与到流程实例中。
    </para>
</section>

 <section>
      <title>列出流程实例的变量</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>列出流程实例的变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>列出流程实例的变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例，并返回了变量。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },
   {
      "name":"byteArrayProcVar",
      "type":"binary",
      "value":null,
      "valueUrl":"http://localhost:8182/runtime/process-instances/5/variables/byteArrayProcVar/data",
      "scope":"local"
   },

   ...
]</programlisting>
当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
注意只会返回<literal>local</literal>作用域的变量，因为流程实例变量没有<literal>global</literal>作用域。</para>
</section>

  <section>
      <title>获得流程实例的一个变量</title>
        <para>
          <programlisting>GET runtime/process-instances/{processInstanceId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例的一个变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的流程实例id</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取变量的名称</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得流程实例的一个变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例和变量，并返回了变量。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体不完全，或包含非法值。状态描述包含对应错误的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例，或流程实例中不包含指定名称的变量。状态描述中包含对应错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</programlisting>
    当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
    注意只会返回<literal>local</literal>作用域的变量，因为流程实例变量没有<literal>global</literal>作用域。</para>
  </section>


  <section>
      <title>创建（或更新）流程实例变量</title>
        <para>
          <programlisting>POST runtime/process-instances/{processInstanceId}/variables</programlisting>
          <programlisting>PUT runtime/process-instances/{processInstanceId}/variables</programlisting>
        </para>
        <para>
		  使用<literal>POST</literal>时，会创建所有传递的变量。如果流程实例中已经存在了其中一个变量，就会返回一个错误（409 - CONFLICT）。使用<literal>PUT</literal>时，
		  流程实例中不存在的变量会被创建，已存在的变量会被更新，不会有任何错误。
            <table>
              <title>创建（或更新）流程实例变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar"
      "type":"integer"
      "value":123
   },

   ...
]</programlisting>
        请求体的数组中可以包含任意多个变量。关于变量格式的更多信息可以参考<link linkend="restVariables">REST变量章节</link>。注意此处忽略作用域，流程实例只能设置<literal>local</literal>作用域。
        </para>
        <para>
          <table>
              <title>创建（或更新）流程实例变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示找到了流程实例，并创建了变量。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体不完整，或包含非法值。状态描述包含对应错误的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                   <row>
                    <entry>409</entry>
                    <entry>表示找到了流程实例，但是已经存在一个相同名称的变量（只在使用POST方法时抛出）。可以使用更新方法替代。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },

   ...

]</programlisting>
  </para>
  </section>

  <section>
      <title>更新一个流程实例变量</title>
        <para>
          <programlisting>PUT runtime/process-instances/{processInstanceId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新一个流程实例变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的流程实例id</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得的变量名称</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
 {
    "name":"intProcVar"
    "type":"integer"
    "value":123
 }</programlisting>
        请求体的数组中可以包含任意多个变量。关于变量格式的更多信息可以参考<link linkend="restVariables">REST变量章节</link>。注意此处忽略作用域，流程实例只能设置<literal>local</literal>作用域。
        </para>
        <para>
          <table>
              <title>更新一个流程实例变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例和变量，并更新了变量。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例，或找不到给定名称的流程实例变量。状态描述包含对应错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</programlisting>
  当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
  注意只会返回<literal>local</literal>作用域的变量，因为流程实例变量没有<literal>global</literal>作用域。
  </para>
  </section>

   <section>
      <title>创建一个新的二进制流程变量</title>
        <para>
          <programlisting>POST runtime/process-instances/{processInstanceId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>创建一个新的二进制流程变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建新变量对应的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/process-instances/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>创建一个新的二进制流程变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功创建了变量，并返回了结果</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有提供希望创建的变量名称。状态消息包含详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示流程实例中已经包含了给定名称的变量。可以使用PUT方法来更新变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>更新一个二进制的流程实例变量</title>
        <para>
          <programlisting>PUT runtime/process-instances/{processInstanceId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>更新一个二进制的流程实例变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建新变量对应的流程实例id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/process-instances/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>更新一个二进制的流程实例变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功更新了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示未提供希望更新的变量名称。状态消息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例id，或找不到指定名称的流程实例变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

</section>

  <section>
  <title>分支</title>

   <section>
      <title>获取一个分支</title>
        <para>
          <programlisting>GET runtime/executions/{executionId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取一个分支 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取分支的id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取一个分支 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支，并成功返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到分支</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/runtime/executions/5",
   "parentId":null,
   "parentUrl":null,
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "suspended":false,
   "activityId":null,
   "tenantId": null
}</programlisting>
    </para>
  </section>
 <section>
      <title>对分支执行操作</title>
        <para>
          <programlisting>PUT runtime/executions/{executionId}</programlisting>
        </para>
        <para>
            <table>
              <title>对分支执行操作 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望执行操作的分支id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体（继续执行分支）：</emphasis>
            <programlisting>
{
  "action":"signal"
}</programlisting>
    </para>
     <para>
       <emphasis role="bold">请求体（分支接收了信号事件）：</emphasis>
            <programlisting>
{
  "action":"signalEventReceived",
  "signalName":"mySignal"
  "variables": [ ... ]
}</programlisting>
 提醒分支接收了一个信号事件，要使用一个<literal>signalName</literal>参数。还可以传递<literal>variables</literal>参数，它会在执行操作之前设置到分支中。
    </para>
     <para>
       <emphasis role="bold">请求体（分支接收了消息事件）：</emphasis>
            <programlisting>
{
  "action":"messageEventReceived",
  "messageName":"myMessage"
  "variables": [ ... ]
}</programlisting>
 提醒分支接收了一个消息事件，要使用一个<literal>messageName</literal>参数。还可以传递<literal>variables</literal>参数，它会在执行操作之前设置到分支中。
    </para>
        <para>
          <table>
              <title>对分支执行操作 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支，并执行了操作。</entry>
                  </row>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了分支，执行了操作，并且操作导致分支结束了。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求的操作不合法，请求中缺少必须的参数，或传递了非法的变量。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到分支</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体（当操作没有导致分支结束的情况）：</emphasis>
            <programlisting>
{
   "id":"5",
   "url":"http://localhost:8182/runtime/executions/5",
   "parentId":null,
   "parentUrl":null,
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "suspended":false,
   "activityId":null,
   "tenantId" : null
}</programlisting>
    </para>
  </section>

  <section>
      <title>获得一个分支的所有活动节点</title>
        <para>
          <programlisting>GET runtime/executions/{executionId}/activities</programlisting>
        </para>
        <para>
		  返回分支以及子分支当前所有活动的节点（递归所有下级）。
        </para>
        <para>
            <table>
              <title>获得一个分支的所有活动节点 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取节点对应的分支id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得一个分支的所有活动节点 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支，并返回了节点。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到分支</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  "userTaskForManager",
  "receiveTask"
]</programlisting>
    </para>
  </section>

  <section id="restExecutionsGet">
      <title>获取分支列表</title>
        <para>
          <programlisting>GET repository/executions</programlisting>
        </para>
        <para>
            <table>
              <title>获取分支列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定id的分支。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义key的分支。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义id的分支。</entry>
                  </row>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定流程实例id一部分的分支。</entry>
                  </row>
                  <row>
                    <entry>messageEventSubscriptionName</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回订阅了指定名称消息的分支。</entry>
                  </row>
                  <row>
                    <entry>signalEventSubscriptionName</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回订阅了指定名称信号的分支。</entry>
                  </row>
                  <row>
                    <entry>parentId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定分支直接下级的分支。</entry>
                  </row>
                    <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的分支。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的分支。</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未设置tenantId的分支。如果为 <literal>false</literal>，会忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>排序字段，应该和<literal>processInstanceId</literal>（默认）， <literal>processDefinitionId</literal>， <literal>processDefinitionKey</literal>或<literal>tenantId</literal>之一一起使用。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取分支列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了分支。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"5",
         "url":"http://localhost:8182/runtime/executions/5",
         "parentId":null,
         "parentUrl":null,
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":null,
		 "tenantId":null
      },
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/executions/7",
         "parentId":"5",
         "parentUrl":"http://localhost:8182/runtime/executions/5",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":"processTask",
		 "tenantId":null
      }
   ],
   "total":2,
   "start":0,
   "sort":"processInstanceId",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>

    <section>
      <title>查询分支</title>
        <para>
          <programlisting>POST query/executions</programlisting>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
{
  "processDefinitionKey":"oneTaskProcess",
  "variables":
  [
    {
        "name" : "myVariable",
        "value" : 1234,
        "operation" : "equals",
        "type" : "long"
    },
    ...
  ],
  "processInstanceVariables":
  [
    {
        "name" : "processVariable",
        "value" : "some string",
        "operation" : "equals",
        "type" : "string"
    },
    ...
  ],
  ...
}</programlisting>

请求体可以包含在<link linkend="restExecutionsGet">获取分支列表</link>中可以使用的查询条件。除此之外，也可以在查询中提供<literal>variables</literal>和<literal>processInstanceVariables</literal>列表，关于变量的格式可以参考<link linkend="restQueryVariable">此处</link>。
    </para>
    <para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para>
        <para>
          <table>
              <title>查询分支 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回了分支。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"5",
         "url":"http://localhost:8182/runtime/executions/5",
         "parentId":null,
         "parentUrl":null,
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":null,
		 "tenantId":null
      },
      {
         "id":"7",
         "url":"http://localhost:8182/runtime/executions/7",
         "parentId":"5",
         "parentUrl":"http://localhost:8182/runtime/executions/5",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "suspended":false,
         "activityId":"processTask",
		 "tenantId":null
      }
   ],
   "total":2,
   "start":0,
   "sort":"processInstanceId",
   "order":"asc",
   "size":2
}</programlisting>
    </para>
    </section>


    <section>
      <title>获取分支的变量列表</title>
        <para>
          <programlisting>GET runtime/executions/{executionId}/variables?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获取分支的变量列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的分支id。</entry>
                  </row>
                   <row>
                    <entry>scope</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry><literal>local</literal> 或 <literal>global</literal>。如果忽略，会返回local和global作用域下的所有变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取分支的变量列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支，并返回了变量。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"global"
   },
   {
      "name":"byteArrayProcVar",
      "type":"binary",
      "value":null,
      "valueUrl":"http://localhost:8182/runtime/process-instances/5/variables/byteArrayProcVar/data",
      "scope":"local"
   },

   ...
]</programlisting>
当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
</para>
</section>

  <section>
      <title>获得分支的一个变量</title>
        <para>
          <programlisting>GET runtime/executions/{executionId}/variables/{variableName}?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获得分支的一个变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的分支id</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取的变量名称。</entry>
                  </row>
                   <row>
                    <entry>scope</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry><literal>local</literal> 或 <literal>global</literal>。如果忽略，返回local变量（如果存在）。如果不存在局部变量，返回global变量（如果存在）。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得分支的一个变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支和变量，并返回了变量。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体不完全，或包含非法数值。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支，或分支在请求作用域中不包含指定名称的变量（如果忽略scope参数，既不存在local变量也不存在global变量）。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   }</programlisting>
    当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
    </para>
  </section>


  <section>
      <title>新建（或更新）分支变量</title>
        <para>
          <programlisting>POST runtime/executions/{executionId}/variables</programlisting>
          <programlisting>PUT runtime/executions/{executionId}/variables</programlisting>
        </para>
        <para>
		  使用<literal>POST</literal>时，会创建所有传递的变量。如果流程实例中已经存在了其中一个变量，就会返回一个错误（409 - CONFLICT）。使用<literal>PUT</literal>时，
		  流程实例中不存在的变量会被创建，已存在的变量会被更新，不会有任何错误。
            <table>
              <title>新建（或更新）分支变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的分支id</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar"
      "type":"integer"
      "value":123,
      "scope":"local"
   },

   ...
]</programlisting>
        <emphasis role="bold">注意你只能提供作用域相同的变量。如果请求体数组中包含了不同作用域的变量，请求会返回一个错误（400 - BAD REQUEST）。</emphasis>请求体数据中可以传递任意个数的变量。关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。注意，如果忽略了作用域，只有<literal>local</literal>作用域的比那两可以设置到流程实例中。
        </para>
        <para>
          <table>
              <title>新建（或更新）分支变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示找到了分支，并成功创建了变量。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体不完全或包含了非法数据。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支。</entry>
                  </row>
                   <row>
                    <entry>409</entry>
                    <entry>表示找到了流程实例，但是已经存在一个相同名称的变量（只在使用POST方法时抛出）。可以使用更新方法替代。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"local"
   },

   ...

]</programlisting>
  </para>
  </section>

  <section>
      <title>更新分支变量</title>
        <para>
          <programlisting>PUT runtime/executions/{executionId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新分支变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量对应的分支id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
            <programlisting>
 {
    "name":"intProcVar"
    "type":"integer"
    "value":123,
    "scope":"global"
 }</programlisting>
        关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。
        </para>
        <para>
          <table>
              <title>更新分支变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了分支和变量，并成功更新了变量。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支，或分支不包含指定名称的变量。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
   {
      "name":"intProcVar",
      "type":"integer",
      "value":123,
      "scope":"global"
   }</programlisting>
    当变量为二进制或序列化类型时，<literal>valueUrl</literal>给出了获得原始数据的URL。如果是普通变量，变量值就会直接包含在响应中。
  </para>
  </section>

   <section>
      <title>创建一个二进制变量</title>
        <para>
          <programlisting>POST runtime/executions/{executionId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>创建一个二进制变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望创建的新变量对应的分支id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/executions/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>创建一个二进制变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功创建了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有提供希望创建的变量名称。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的分支。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示分支已经拥有了一个与指定名称相关的变量。使用PUT方法来代替更新分支变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>更新已经已存在的二进制分支变量</title>
         <para>
          <programlisting>PUT runtime/executions/{executionId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新已经已存在的二进制分支变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>executionId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量对应的分支id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
           <listitem>
            <para><literal>scope</literal>：创建的变量作用于。如果忽略，假设是<literal>local</literal>。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/executions/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>更新已经已存在的二进制分支变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示变量已成功工薪，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有提供希望更新的变量名称。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示没有找到分支，或分支不包含指定名称的变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
</section>

  <section>
  <title>任务</title>
      <section>
      <title>获取任务</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取任务 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务并返回。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "assignee" : "kermit",
  "createTime" : "2013-04-17T10:17:43.902+0000",
  "delegationState" : "pending",
  "description" : "Task description",
  "dueDate" : "2013-04-17T10:17:43.902+0000",
  "execution" : "http://localhost:8182/runtime/executions/5",
  "id" : "8",
  "name" : "My task",
  "owner" : "owner",
  "parentTask" : "http://localhost:8182/runtime/tasks/9",
  "priority" : 50,
  "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "processInstance" : "http://localhost:8182/runtime/process-instances/5",
  "suspended" : false,
  "taskDefinitionKey" : "theTask",
  "url" : "http://localhost:8182/runtime/tasks/8",
  "tenantId" : null
}</programlisting>
      <itemizedlist>
          <listitem>
            <para><literal>delegationState</literal>：任务的代理状态。可以为<literal>null</literal>，<literal>"pending"</literal> 或 <literal>"resolved"</literal>。</para>
          </listitem>
      </itemizedlist>
    </para>
    </section>

  <section id="restTasksGet">
      <title>任务列表</title>
        <para>
          <programlisting>GET runtime/tasks</programlisting>
        </para>
        <para>
            <table>
              <title>任务列表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>name</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定的名称。</entry>
                  </row>
                  <row>
                    <entry>nameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定名称匹配的任务。</entry>
                  </row>
                  <row>
                    <entry>description</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定描述的任务。</entry>
                  </row>
                  <row>
                    <entry>priority</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>只返回指定优先级的任务。</entry>
                  </row>
                  <row>
                    <entry>minimumPriority</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>只返回比指定优先级大的任务。</entry>
                  </row>
                  <row>
                    <entry>maximumPriority</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>只返回比指定优先级小的任务。</entry>
                  </row>
                  <row>
                    <entry>assignee</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回分配给指定用户的任务。</entry>
                  </row>
                  <row>
                    <entry>assigneeLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回负责人与指定值匹配的任务。</entry>
                  </row>
                  <row>
                    <entry>owner</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回原拥有人为指定用户的任务。</entry>
                  </row>
                  <row>
                    <entry>ownerLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回原拥有人与指定值匹配的任务。</entry>
                  </row>
                  <row>
                    <entry>unassigned</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>只返回没有分配给任何人的任务。如果传递<literal>false</literal>，这个值就会被忽略。</entry>
                  </row>
                  <row>
                    <entry>delegationState</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定代理状态的任务。可选值为<literal>pending</literal> 和 <literal>resolved</literal>。</entry>
                  </row>
                  <row>
                    <entry>candidateUser</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回可以被指定用户领取的任务。这包含将用户设置为直接候选人和用户作为候选群组一员的情况。</entry>
                  </row>
                  <row>
                    <entry>candidateGroup</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回可以被指定群组中用户领取的任务。</entry>
                  </row>
                  <row>
                    <entry>involvedUser</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定用户参与过的任务。</entry>
                  </row>
                  <row>
                    <entry>taskDefinitionKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定任务定义id的任务。</entry>
                  </row>
                  <row>
                    <entry>taskDefinitionKeyLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回任务定义id与指定值匹配的任务。</entry>
                  </row>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定id的流程实例的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>processInstanceBusinessKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定key的流程实例的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>processInstanceBusinessKeyLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回业务key与指定值匹配的流程实例的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionKey</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定流程定义key的流程实例的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionKeyLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定流程定义key与指定值匹配的流程实例的一部分的任务。</entry>
                  </row>
                   <row>
                    <entry>processDefinitionName</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定流程定义名称的流程实例的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>processDefinitionNameLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回流程定义名称与指定值匹配的流程实例的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>executionId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回作为指定id分支的一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>createdOn</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回指定创建时间的任务。</entry>
                  </row>
                  <row>
                    <entry>createdBefore</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回在指定时间之前创建的任务。</entry>
                  </row>
                  <row>
                    <entry>createdAfter</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回在指定时间之后创建的任务。</entry>
                  </row>
                  <row>
                    <entry>dueOn</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回指定持续时间的任务。</entry>
                  </row>
                  <row>
                    <entry>dueBefore</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回持续时间在指定时间之前的任务。</entry>
                  </row>
                  <row>
                    <entry>dueAfter</entry>
                    <entry>否</entry>
                    <entry>ISO Date</entry>
                    <entry>只返回持续时间在指定时间之后的任务。</entry>
                  </row>
                  <row>
                    <entry>withoutDueDate</entry>
                    <entry>否</entry>
                    <entry>boolean</entry>
                    <entry>只返回没有设置持续时间的任务。如果值为<literal>false</literal>就会忽略这个属性。</entry>
                  </row>
                  <row>
                    <entry>excludeSubTasks</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>只返回非子任务的任务。</entry>
                  </row>
                  <row>
                    <entry>active</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未挂起的任务（作为未挂起流程的一部分，或者不属于任何流程）。如果为false，只返回作为挂起流程一部分的任务。</entry>
                  </row>
                  <row>
                    <entry>includeTaskLocalVariables</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>Indication to include task local variables in the result.</entry>
                  </row>
                  <row>
                    <entry>includeProcessVariables</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>表示在结果中包含变量。</entry>
                  </row>
                  <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的任务。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的任务。</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未设置tenantId的任务。如果为 <literal>false</literal>，会忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>任务列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回任务。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递的参数格式错误，或'delegationState'使用了不合法的数据('pending' 和 'resolved'以外的数据)。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "data": [
    {
      "assignee" : "kermit",
      "createTime" : "2013-04-17T10:17:43.902+0000",
      "delegationState" : "pending",
      "description" : "Task description",
      "dueDate" : "2013-04-17T10:17:43.902+0000",
      "execution" : "http://localhost:8182/runtime/executions/5",
      "id" : "8",
      "name" : "My task",
      "owner" : "owner",
      "parentTask" : "http://localhost:8182/runtime/tasks/9",
      "priority" : 50,
      "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstance" : "http://localhost:8182/runtime/process-instances/5",
      "suspended" : false,
      "taskDefinitionKey" : "theTask",
      "url" : "http://localhost:8182/runtime/tasks/8",
	  "tenantId" : null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
    </para>
    </section>

   <section>
      <title>查询任务</title>
        <para>
          <programlisting>POST query/tasks</programlisting>
        </para>
        <para>
          <emphasis role="bold">请求体：</emphasis>
          <programlisting>
{
  "name" : "My task",
  "description" : "The task description",

  ...

  "taskVariables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operation" : "equals",
      "type" : "long"
    }
  ],

    "processInstanceVariables" : [
      {
         ...
      }
    ]
  ]
}</programlisting>
        </para>
        <para>
		  此处所有被支持的JSON参数都和<link linkend="restTasksGet">获得任务集合</link>完全一样，只是使用JSON体参数的方式替代URL参数，这样就可以使用更加高级的查询方式，并能预防请求uri过长导致的问题。除此之外，可以基于任务和流程变量进行查询。<literal>taskVariables</literal> 和 <literal>processInstanceVariables</literal> 都可以包含 <link linkend="restQueryVariable">此处描述</link>的json数组。
        </para>
        <para>
          <table>
              <title>查询任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示请求成功，并返回任务。</entry>
                  </row>
                   <row>
                    <entry>400</entry>
                    <entry>表示传递了格式错误的参数，或'delegationState'传递了非法数据 ( 'pending' 和 'resolved'之外的值)。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "data": [
    {
      "assignee" : "kermit",
      "createTime" : "2013-04-17T10:17:43.902+0000",
      "delegationState" : "pending",
      "description" : "Task description",
      "dueDate" : "2013-04-17T10:17:43.902+0000",
      "execution" : "http://localhost:8182/runtime/executions/5",
      "id" : "8",
      "name" : "My task",
      "owner" : "owner",
      "parentTask" : "http://localhost:8182/runtime/tasks/9",
      "priority" : 50,
      "processDefinition" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstance" : "http://localhost:8182/runtime/process-instances/5",
      "suspended" : false,
      "taskDefinitionKey" : "theTask",
      "url" : "http://localhost:8182/runtime/tasks/8",
	  "tenantId" : null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
    </para>
    </section>

  <section>
      <title>更新任务</title>
        <para>
          <programlisting>PUT runtime/tasks/{taskId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "assignee" : "assignee",
  "delegationState" : "resolved",
  "description" : "New task description",
  "dueDate" : "2013-04-17T13:06:02.438+02:00",
  "name" : "New task name",
  "owner" : "owner",
  "parentTaskId" : "3",
  "priority" : 20
}</programlisting>
      所有请求参数都是可选的。比如，你可以在请求体的JSON对象中只包含'assignee'属性，只更新任务的负责人，其他字段都不填。当包含的字段值为null时，任务的对应属性会被更新为null。比如：<literal>{"dueDate" : null}</literal>会清空任务的持续时间。
       </para>
        <para>
          <table>
              <title>更新任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功更新了任务。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示请求的任务正在被更新。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考<literal>runtime/tasks/{taskId}</literal>的响应。
      </para>
  </section>
   <section>
      <title>操作任务</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">完成任务 - JSON体：</emphasis>
           <programlisting>
{
  "action" : "complete",
  "variables" : ...
}</programlisting>
       完成任务。可以使用<literal>variables</literal>参数传递可选的variable数组。关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。注意，此处忽略变量作用域，变量会设置到上级作用域，除非本地作用域应包含了同名变量。这与<literal>TaskService.completeTask(taskId, variables)</literal> 的行为是相同的。
       </para>
       <para>
         <emphasis role="bold">认领任务 - JSON体：</emphasis>
           <programlisting>
{
  "action" : "claim",
  "assignee" : "userWhoClaims"
}</programlisting>
      根据指定的assignee认领任务。如果assignee为<literal>null</literal>，任务的执行人会变成空，又可以重新认领了。

       </para>
       <para>
         <emphasis role="bold">代理任务 - JSON体：</emphasis>
           <programlisting>
{
  "action" : "delegate",
  "assignee" : "userToDelegateTo"
}</programlisting>
      指定assignee代理任务。assignee是必填项。
       </para>
       <para>
         <emphasis role="bold">处理任务 - JSON体：</emphasis>
           <programlisting>
{
  "action" : "resolve"
}</programlisting>
处理任务代理。任务会返回给任务的原负责人（如果存在）。
       </para>
        <para>
          <table>
              <title>操作任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示操作成功执行。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>当请求包含了非法数据或当操作需要assignee参数时，却没有传。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示因为冲突导致无法执行操作。可能任务正在被更新，或者，在'<literal>claim</literal>'认清任务时，任务已经被其他用户认领了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考<literal>runtime/tasks/{taskId}</literal>的响应。
      </para>
  </section>
      <section>
      <title>删除任务</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}?cascadeHistory={cascadeHistory}&amp;deleteReason={deleteReason}</programlisting>
        </para>
        <para>
            <table>
              <title>>删除任务 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的任务id。</entry>
                  </row>
                  <row>
                    <entry>cascadeHistory</entry>
                    <entry>False</entry>
                    <entry>Boolean</entry>
                    <entry>删除任务时是否删除对应的任务历史（如果存在）。如果没有设置这个参数，默认为false。</entry>
                  </row>
                  <row>
                    <entry>deleteReason</entry>
                    <entry>False</entry>
                    <entry>String</entry>
                    <entry>删除任务的原因。<literal>cascadeHistory</literal>为true时，忽略此参数。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>>删除任务 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到任务，并成功删除。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>403</entry>
                    <entry>表示无法删除任务，因为它是流程的一部分。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

   <section>
      <title>获得任务的变量</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/variables?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>False</entry>
                    <entry>String</entry>
                    <entry>返回的变量作用于。如果为 '<literal>local</literal>'，只返回任务本身的变量。如果为 '<literal>global</literal>'，只返回任务上级分支的变量。如果不指定这个变量，会返回所有局部和全局的变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得任务的变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务并返回了请求的变量。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "name" : "doubleTaskVar",
    "scope" : "local",
    "type" : "double",
    "value" : 99.99
  },
  {
    "name" : "stringProcVar",
    "scope" : "global",
    "type" : "string",
    "value" : "This is a ProcVariable"
  },

  ...

]</programlisting>

      返回JSON数组型的变量。对响应的详细介绍可以参考<link linkend="restVariables">REST变量章节</link>。
    </para>
  </section>

   <section>
      <title>获取任务的一个变量</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/variables/{variableName}?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获取任务的一个变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取变量对应的名称。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>False</entry>
                    <entry>String</entry>
                    <entry>返回的变量作用于。如果为 '<literal>local</literal>'，只返回任务本身的变量。如果为 '<literal>global</literal>'，只返回任务上级分支的变量。如果不指定这个变量，会返回所有局部和全局的变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取任务的一个变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务并返回了请求的变量。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或者任务不包含指定名称的变量（在指定作用域下）。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</programlisting>

	  对响应的详细介绍可以参考<link linkend="restVariables">REST变量章节</link>。
    </para>
  </section>

  <section>
      <title>获取变量的二进制数据</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/variables/{variableName}/data?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>获取变量的二进制数据 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取变量数据对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取数据对应的变量名称。只能使用 <literal>binary</literal> 和 <literal>serializable</literal> 类型的变量。如果使用了其他类型的变量，会返回 <literal>404</literal> 。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>False</entry>
                    <entry>String</entry>
                    <entry>返回的变量作用于。如果为 '<literal>local</literal>'，只返回任务本身的变量。如果为 '<literal>global</literal>'，只返回任务上级分支的变量。如果不指定这个变量，会返回所有局部和全局的变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取变量的二进制数据 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务并返回了请求的变量。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或者任务不包含指定名称的变量（在指定作用域下），或变量的二进制流不可用。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
	  响应体包含了变量的二进制值。当类型为 <literal>binary</literal>时，无论请求的accept-type头部设置了什么值，响应的content-type都为<literal>application/octet-stream</literal>。当类型为 <literal>serializable</literal>时， content-type为<literal>application/x-java-serialized-object</literal>。
    </para>
  </section>

  <section>
      <title>创建任务变量</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>创建任务变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建新变量对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">创建简单（非二进制）变量的请求体：</emphasis>
            <programlisting>
[
  {
    "name" : "myTaskVariable",
    "scope" : "local",
    "type" : "string",
    "value" : "Hello my friend"
  },
  {
    ...
  }
]</programlisting>
请求体应该是包含一个或多个JSON对象的数组，对应应该创建的变量。
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>scope</literal>:创建的变量的作用域。如果忽略，假设为<literal>local</literal>。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量的类型。如果忽略，转换为对应的JSON的类型 (string, boolean, integer 或 double)。</para>
          </listitem>
          <listitem>
            <para><literal>value</literal>：变量值。</para>
          </listitem>
      </itemizedlist>
      关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。
        </para>
        <para>
        <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "name" : "myTaskVariable",
    "scope" : "local",
    "type" : "string",
    "value" : "Hello my friend"
  },
  {
    ...
  }
]</programlisting>
          <table>
              <title>创建任务变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传变量名，或尝试使用<literal>global</literal>作用域为独立任务（没有关联到流程）创建变量，或请求中的变量为空，或请求没有包含变量数组。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示任务已经存在指定名称的变量了。可以使用PUT方法来更新任务变量。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
   <section>
      <title>创建二进制任务变量</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>创建二进制任务变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建新变量对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>scope</literal>：创建的变量的作用域。如果忽略，假设使用 <literal>local</literal>。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/tasks/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>创建二进制任务变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传变量名，或尝试使用<literal>global</literal>作用域为独立任务（没有关联到流程）创建变量。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示任务已经存在指定名称的变量了。可以使用PUT方法来更新任务变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
   <section>
      <title>更新任务的一个已有变量</title>
        <para>
          <programlisting>PUT runtime/tasks/{taskId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新任务的一个已有变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">更新简单（非二进制）变量的请求体：</emphasis>
            <programlisting>
{
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</programlisting>
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>scope</literal>：更新的变量的作用域。如果忽略，假设为<literal>local</literal>。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：更新的变量的类型。如果忽略，转换为对应的JSON的类型 (string, boolean, integer 或 double)。</para>
          </listitem>
          <listitem>
            <para><literal>value</literal>：变量值。</para>
          </listitem>
      </itemizedlist>
      关于变量格式的详细信息可以参考<link linkend="restVariables">REST变量章节</link>。
        </para>
        <para>
        <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "myTaskVariable",
  "scope" : "local",
  "type" : "string",
  "value" : "Hello my friend"
}</programlisting>
          <table>
              <title>更新任务的一个已有变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功更新了变量并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传变量名，或尝试使用<literal>global</literal>作用域为独立任务（没有关联到流程）创建变量。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务在指定作用域不包含指定名称的变量。状态信息包含错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>更新一个二进制任务变量</title>
        <para>
          <programlisting>PUT runtime/tasks/{taskId}/variables/{variableName}</programlisting>
        </para>
        <para>
            <table>
              <title>更新一个二进制任务变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望更新的变量名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>scope</literal>：创建的变量的作用域。如果忽略，假设使用 <literal>local</literal>。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "name" : "binaryVariable",
  "scope" : "local",
  "type" : "binary",
  "value" : null,
  "valueUrl" : "http://.../runtime/tasks/123/variables/binaryVariable/data"
}</programlisting>
          <table>
              <title>更新一个二进制任务变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示更新了变量，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传变量名，或尝试使用<literal>global</literal>作用域为独立任务（没有关联到流程）创建变量。状态信息包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务在指定作用域不包含指定名称的变量。</entry>
                  </row>
                  <row>
                    <entry>415</entry>
                    <entry>表示序列化数据包含的对象的类并不在运行Activiti引擎的JVM中，所以无法反序列化。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>删除任务变量</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}/variables/{variableName}?scope={scope}</programlisting>
        </para>
        <para>
            <table>
              <title>删除任务变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的变量对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>variableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的变量名称。</entry>
                  </row>
                  <row>
                    <entry>scope</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>希望删除的变量的作用域。可以是<literal>local</literal> 或 <literal>global</literal>。如果忽略，假设为<literal>local</literal>。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除任务变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了任务变量，并成功删除。响应体为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含指定名称的变量。状态信息包含错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>删除任务的所有局部变量</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}/variables</programlisting>
        </para>
        <para>
            <table>
              <title>删除任务的所有局部变量 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除的变量对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除任务的所有局部变量 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示已经删除了任务的所有局部变量。响应体为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的所有IdentityLink</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/identitylinks</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的所有IdentityLink - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得IdentityLink对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得任务的所有IdentityLink - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务，并返回了IdentityLink。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "userId" : "kermit",
    "groupId" : null,
    "type" : "candidate",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/users/kermit/candidate"
  },
  {
    "userId" : null,
    "groupId" : "sales",
    "type" : "candidate",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
  },

  ...
]</programlisting>
    </para>
  </section>

   <section>
      <title>获得一个任务的所有组或用户的IdentityLink</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/identitylinks/users
GET runtime/tasks/{taskId}/identitylinks/groups</programlisting>
        </para>
        <para>
		返回对应于用户或组的IdentityLink。响应体与状态码与获得一个任务的所有IdentityLink完全一样。
        </para>
  </section>
  <section>
  <title>获得一个任务的一个IdentityLink</title>
      <para>
        <programlisting>GET runtime/tasks/{taskId}/identitylinks/{family}/{identityId}/{type}</programlisting>
      </para>
      <para>
          <table>
            <title>获得一个任务的所有组或用户的IdentityLink - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>任务的id。</entry>
                </row>
                <row>
                  <entry>family</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry><literal>groups</literal> 或 <literal>users</literal>，对应期望获得哪种IdentityLink。</entry>
                </row>
                <row>
                  <entry>identityId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>IdentityLink的id。</entry>
                </row>
                <row>
                  <entry>type</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>IdentityLink的类型。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>获得一个任务的所有组或用户的IdentityLink - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示找到了任务和IdentityLink，并成功返回。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到任务，或任务不包含请求的IdentityLink。状态包含了错误的详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "userId" : null,
  "groupId" : "sales",
  "type" : "candidate",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
}</programlisting>
  </para>
</section>

  <section>
    <title>为任务创建一个IdentityLink</title>
      <para>
        <programlisting>POST runtime/tasks/{taskId}/identitylinks</programlisting>
      </para>
      <para>
          <table>
            <title>为任务创建一个IdentityLink - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>任务的id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
       <emphasis role="bold">请求体（用户）：</emphasis>
            <programlisting>
{
  "userId" : "kermit",
  "type" : "candidate",
}</programlisting>
    </para>
    <para>
       <emphasis role="bold">请求体（组）：</emphasis>
            <programlisting>
{
  "groupId" : "sales",
  "type" : "candidate",
}</programlisting>
    </para>
      <para>
        <table>
            <title>为任务创建一个IdentityLink - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>201</entry>
                  <entry>表示找到了任务，并创建了IdentityLink。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到任务，或任务不包含请求的IdentityLink。状态包含了错误的详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "userId" : null,
  "groupId" : "sales",
  "type" : "candidate",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/identitylinks/groups/sales/candidate"
}</programlisting>
    </para>
    </section>


     <section>
      <title>删除任务的一个IdentityLink</title>
         <para>
        <programlisting>DELETE runtime/tasks/{taskId}/identitylinks/{family}/{identityId}/{type}</programlisting>
      </para>
      <para>
          <table>
            <title>删除任务的一个IdentityLink - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>任务的id。</entry>
                </row>
                <row>
                  <entry>family</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry><literal>groups</literal> 或 <literal>users</literal>，对应IdentityLink的种类。</entry>
                </row>
                <row>
                  <entry>identityId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>IdentityLink的id。</entry>
                </row>
                <row>
                  <entry>type</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>IdentityLink的类型。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>删除任务的一个IdentityLink - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了任务和IdentityLInk，并成功删除了IdentityLink。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含请求的IdentityLink。状态包含了错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>为任务创建评论</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/comments</programlisting>
        </para>
        <para>
            <table>
              <title>为任务创建评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建评论对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "message" : "This is a comment on the task."
}</programlisting>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id" : "123",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
  "message" : "This is a comment on the task.",
  "author" : "kermit"
}</programlisting>
          <table>
              <title>为任务创建评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了评论，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求不包含评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的所有评论</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/comments</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的所有评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取评论对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "id" : "123",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
    "message" : "This is a comment on the task.",
    "author" : "kermit"
  },
  {
    "id" : "456",
    "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/456",
    "message" : "This is another comment on the task.",
    "author" : "gonzo"
  }
]</programlisting>
          <table>
              <title>获得任务的所有评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务，并返回了评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的一个评论</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/comments/{commentId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的一个评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取评论对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>commentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>评论的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id" : "123",
  "url" : "http://localhost:8081/activiti-rest/service/runtime/tasks/100/comments/123",
  "message" : "This is a comment on the task.",
  "author" : "kermit"
}</programlisting>
          <table>
              <title>获得任务的一个评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务和评论，并返回了评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含指定id的评论。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>删除任务的一条评论</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}/comments/{commentId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除任务的一条评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>删除评论对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>commentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>评论的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <table>
            <title>删除任务的一条评论 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>204</entry>
                  <entry>表示找到了任务和评论，并删除了评论。响应体为空。</entry>
                </row>
                <row>
                  <entry>404</entry>
					  <entry>表示找不到任务，或任务不包含id的评论。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
  </section>
    <section>
      <title>获得任务的所有事件</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/events</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的所有事件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获得事件对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "action" : "AddUserLink",
    "id" : "4",
    "message" : [ "gonzo", "contributor" ],
    "taskUrl" : "http://localhost:8182/runtime/tasks/2",
    "time" : "2013-05-17T11:50:50.000+0000",
    "url" : "http://localhost:8182/runtime/tasks/2/events/4",
    "userId" : null
  },

  ...

]</programlisting>
          <table>
              <title>获得任务的所有事件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务，并返回了事件。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的一个事件</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/events/{eventId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的一个事件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获得事件对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>eventId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>事件的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "action" : "AddUserLink",
  "id" : "4",
  "message" : [ "gonzo", "contributor" ],
  "taskUrl" : "http://localhost:8182/runtime/tasks/2",
  "time" : "2013-05-17T11:50:50.000+0000",
  "url" : "http://localhost:8182/runtime/tasks/2/events/4",
  "userId" : null
}</programlisting>
          <table>
              <title>获得任务的一个事件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务和事件，并返回了事件。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含对应id的事件。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>


    <section>
      <title>为任务创建一个附件，包含外部资源的链接</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/attachments</programlisting>
        </para>
        <para>
            <table>
              <title>为任务创建一个附件，包含外部资源的链接 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建附件对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "name":"Simple attachment",
  "description":"Simple attachment description",
  "type":"simpleType",
  "externalUrl":"http://activiti.org"
}</programlisting>
创建附件只有name是必填的。
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id":"3",
  "url":"http://localhost:8182/runtime/tasks/2/attachments/3",
  "name":"Simple attachment",
  "description":"Simple attachment description",
  "type":"simpleType",
  "taskUrl":"http://localhost:8182/runtime/tasks/2",
  "processInstanceUrl":null,
  "externalUrl":"http://activiti.org",
  "contentUrl":null
}</programlisting>
          <table>
              <title>为任务创建一个附件，包含外部资源的链接 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了附件，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求中缺少了附件名称。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
  <title>为任务创建一个附件，包含附件文件</title>
        <para>
          <programlisting>POST runtime/tasks/{taskId}/attachments</programlisting>
        </para>
        <para>
            <table>
              <title>为任务创建一个附件，包含附件文件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>创建附件对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
      <itemizedlist>
          <listitem>
            <para><literal>name</literal>：必须的变量名称。</para>
          </listitem>
          <listitem>
            <para><literal>description</literal>：附件的描述，可选。</para>
          </listitem>
          <listitem>
            <para><literal>type</literal>：创建的变量类型。如果忽略，会假设使用<literal>binary</literal>，请求的二进制数据会当做二进制数组保存起来。</para>
          </listitem>
      </itemizedlist>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
      "id":"5",
      "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
      "name":"Binary attachment",
      "description":"Binary attachment description",
      "type":"binaryType",
      "taskUrl":"http://localhost:8182/runtime/tasks/2",
      "processInstanceUrl":null,
      "externalUrl":null,
      "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
   }</programlisting>
          <table>
              <title>为任务创建一个附件，包含附件文件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了附件，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求中缺少附件名称，或请求中未包含文件。错误信息中包含了详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的所有附件</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/attachments</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的所有附件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取附件对应的任务id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "id":"3",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/3",
    "name":"Simple attachment",
    "description":"Simple attachment description",
    "type":"simpleType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":"http://activiti.org",
    "contentUrl":null
  },
  {
    "id":"5",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
    "name":"Binary attachment",
    "description":"Binary attachment description",
    "type":"binaryType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":null,
    "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
  }
]</programlisting>
          <table>
              <title>获得任务的所有附件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务，并返回了附件。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得任务的一个附件</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/attachments/{attachmentId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得任务的一个附件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取附件对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>attachmentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>附件的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
  {
    "id":"5",
    "url":"http://localhost:8182/runtime/tasks/2/attachments/5",
    "name":"Binary attachment",
    "description":"Binary attachment description",
    "type":"binaryType",
    "taskUrl":"http://localhost:8182/runtime/tasks/2",
    "processInstanceUrl":null,
    "externalUrl":null,
    "contentUrl":"http://localhost:8182/runtime/tasks/2/attachments/5/content"
  }</programlisting>
  <itemizedlist>
    <listitem>
      <para>
        <literal>externalUrl - contentUrl：</literal>如果附件是一个外部资源链接，<literal>externalUrl</literal>包含外部内容的URL。如果附件内容保存在Activiti引擎中，<literal>contentUrl</literal>会包含获取二进制流内容的URL。
      </para>
    </listitem>
    <listitem>
      <para>
        <literal>type：</literal>可以是任何有效值。包含一个格式合法的media-type时（比如application/xml, text/plain），二进制HTTP响应的content-type会被设置为对应值。
      </para>
    </listitem>
  </itemizedlist>

        </para>
        <para>
          <table>
              <title>获得任务的一个附件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务和附件，并返回了附件。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含对应id的附件。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获取附件的内容</title>
        <para>
          <programlisting>GET runtime/tasks/{taskId}/attachment/{attachmentId}/content</programlisting>
        </para>
        <para>
            <table>
              <title>获取附件的内容 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取附件数据对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>attachmentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>附件的id，当附件指向外部URL，而不是Activiti中的内容，就会返回<literal>404</literal>。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获取附件的内容 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了任务和附件，并返回了请求的内容。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到任务，或任务不包含对应id的任务，或附件不包含二进制流。状态信息包含了详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
       <emphasis role="bold">成功响应体：</emphasis>
      响应体包含了二进制内容。默认，响应的content-type设置为<literal>application/octet-stream</literal>，除非附件类型包含了合法的Content-Type。
    </para>
  </section>
  <section>
      <title>删除任务的一个附件</title>
        <para>
          <programlisting>DELETE runtime/tasks/{taskId}/attachments/{attachmentId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除任务的一个附件 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>taskId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望删除附件对应的任务id。</entry>
                  </row>
                  <row>
                    <entry>attachmentId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>附件的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <table>
            <title>删除任务的一个附件 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>204</entry>
                  <entry>表示找到了任务和附件，并删除了附件。响应体为空。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到任务，或任务不包含对应id的附件。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
  </section>
</section>
<section>
  <title>历史</title>
  <section>
    <title>获得历史流程实例</title>
    <para>
      <programlisting>GET history/historic-process-instances/{processInstanceId}</programlisting>
    </para>
    <para>
      <table>
          <title>获得历史流程实例 - 响应码</title>
          <tgroup cols='2'>
            <thead>
              <row>
                <entry>响应码</entry>
                <entry>描述</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry>200</entry>
                <entry>表示找到了历史流程实例。</entry>
              </row>
              <row>
                <entry>404</entry>
                <entry>表示找不到历史流程实例。</entry>
              </row>
            </tbody>
         </tgroup>
      </table>
    </para>
    <para>
      <emphasis role="bold">成功响应体：</emphasis>
        <programlisting>
{
  "data": [
    {
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": null,
	  "tenantId":null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section id="restHistoricProcessInstancesGet">
    <title>历史流程实例列表</title>
      <para>
        <programlisting>GET history/historic-process-instances</programlisting>
      </para>
      <para>
          <table>
            <title>历史流程实例列表 - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史流程实例id。</entry>
                </row>
                <row>
                  <entry>processDefinitionKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史流程实例的流程定义key。</entry>
                </row>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史流程实例的流程定义id。</entry>
                </row>
                <row>
                  <entry>businessKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史流程实例的businessKey。</entry>
                </row>
                <row>
                  <entry>involvedUser</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史流程实例的参与者。</entry>
                </row>
                <row>
                  <entry>finished</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示历史流程实例是否结束了。</entry>
                </row>
                <row>
                  <entry>superProcessInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史流程实例的上级流程实例id。</entry>
                </row>
                <row>
                  <entry>excludeSubprocesses</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>只返回非子流程的历史流程实例。</entry>
                </row>
                <row>
                  <entry>finishedAfter</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回指定时间之后结束的历史流程实例。</entry>
                </row>
                <row>
                  <entry>finishedBefore</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回指定时间之前结束的历史流程实例。</entry>
                </row>
                <row>
                  <entry>startedAfter</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回指定时间之后开始的历史流程实例。</entry>
                </row>
                <row>
                  <entry>startedBefore</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回指定时间之前开始的历史流程实例。</entry>
                </row>
                <row>
                  <entry>startedBy</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>只返回由指定用户启动的历史流程实例。</entry>
                </row>
                <row>
                  <entry>includeProcessVariables</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示是否应该返回历史流程实例变量。</entry>
                </row>
                <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的实例。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的实例。</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未设置tenantId的实例。如果为 <literal>false</literal>，会忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>历史流程实例列表 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示成功返回了历史流程实例。</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ],
	  "tenantId":null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>查询历史流程实例</title>
      <para>
        <programlisting>POST query/historic-process-instances</programlisting>
      </para>
      <para>
        <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...

  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operation" : "equals",
      "type" : "long"
    }
  ]
}</programlisting>
      </para>
      <para>
	    所有支持的JSON参数字段和<link linkend="restHistoricProcessInstancesGet">获得历史流程实例集合</link>完全一样，但是传递的是JSON参数，而不是URL参数，这样可以支持更高级的参数，同时避免请求uri过长。除此之外，查询支持基于流程变量查询。
		<literal>variables</literal>属性是一个json数组，包含<link linkend="restQueryVariable">此处描述</link>的格式。
      </para>
      <para>
        <table>
            <title>查询历史流程实例 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回结果。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "businessKey" : "myKey",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "startUserId" : "kermit",
      "startActivityId" : "startEvent",
      "endActivityId" : "endEvent",
      "deleteReason" : null,
      "superProcessInstanceId" : "3",
      "url" : "http://localhost:8182/history/historic-process-instances/5",
      "variables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ],
	  "tenantId":null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>删除历史流程实例</title>
      <para>
        <programlisting>DELETE history/historic-process-instances/{processInstanceId}</programlisting>
      </para>
      <para>
        <table>
            <title>响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示成功删除了历史流程实例。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到历史流程实例。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    </section>
    <section>
      <title>获取历史流程实例的IdentityLink</title>
      <para>
        <programlisting>GET history/historic-process-instance/{processInstanceId}/identitylinks</programlisting>
      </para>
      <para>
        <table>
            <title>响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回了IdentityLink。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到历史流程实例。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
[
 {
  "type" : "participant",
  "userId" : "kermit",
  "groupId" : null,
  "taskId" : null,
  "taskUrl" : null,
  "processInstanceId" : "5",
  "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5"
 }
]</programlisting>
      </para>
    </section>
    <section>
      <title>获取历史流程实例变量的二进制数据</title>
      <para>
        <programlisting>GET history/historic-process-instances/{processInstanceId}/variables/{variableName}/data</programlisting>
      </para>
      <para>
        <table>
            <title>获取历史流程实例变量的二进制数据 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示找到了历史流程实例，并返回了请求的变量数据。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到请求的历史流程实例，或流程实例不包含指定名称的变量，或变量不是二进制流。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
      <emphasis role="bold">成功响应体：</emphasis>
	  响应体包含了变量的二进制值。当类型为 <literal>binary</literal>时，无论请求的accept-type头部设置了什么值，响应的content-type都为<literal>application/octet-stream</literal>。当类型为 <literal>serializable</literal>时， content-type为<literal>application/x-java-serialized-object</literal>。
    </para>
  </section>
   <section>
      <title>为历史流程实例创建一条新评论</title>
        <para>
          <programlisting>POST history/historic-process-instances/{processInstanceId}/comments</programlisting>
        </para>
        <para>
            <table>
              <title>为历史流程实例创建一条新评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>需要创建评论的流程实例id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
       <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "message" : "This is a comment."
}</programlisting>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id" : "123",
  "url" : "http://localhost:8081/activiti-rest/history/historic-process-instances/100/comments/123",
  "message" : "This is a comment.",
  "author" : "kermit"
}</programlisting>
          <table>
              <title>为历史流程实例创建一条新评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了评论，并返回了结果。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求中未包含评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的历史流程实例。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
   <section>
      <title>获得一个历史流程实例的所有评论</title>
        <para>
          <programlisting>GET history/historic-process-instances/{processInstanceId}/comments</programlisting>
        </para>
        <para>
            <table>
              <title>获得流程实例的所有评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>必填</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取评论对应的流程实例id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
  {
    "id" : "123",
    "url" : "http://localhost:8081/activiti-rest/service/history/historic-process-instances/100/comments/123",
    "message" : "This is a comment",
    "author" : "kermit"
  },
  {
    "id" : "456",
    "url" : "http://localhost:8081/activiti-rest/service/history/historic-process-instances/100/comments/456",
    "message" : "This is a否ther comment.",
    "author" : "gonzo"
  }
]</programlisting>
          <table>
              <title>获得流程实例的所有评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了流程实例，并返回了评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的流程实例。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
   <section>
      <title>获得历史流程实例的一条评论</title>
        <para>
          <programlisting>GET history/historic-process-instances/{processInstanceId}/comments/{commentId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得历史流程的一条评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>必填</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获得评论对应的历史流程实例。</entry>
                  </row>
                  <row>
                    <entry>commentId</entry>
                    <entry>Yes</entry>
                    <entry>String</entry>
                    <entry>评论的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "id" : "123",
  "url" : "http://localhost:8081/activiti-rest/history/historic-process-instances/100/comments/123",
  "message" : "This is a comment.",
  "author" : "kermit"
}</programlisting>
          <table>
              <title>获得历史流程的一条评论 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了历史流程实例和评论，并返回了评论。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的历史流程实例，或历史流程实例不包含指定id的评论。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>删除历史流程实例的一条评论</title>
        <para>
          <programlisting>DELETE history/historic-process-instances/{processInstanceId}/comments/{commentId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除历史流程实例的一条评论 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>必填</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>需要删除的评论对应的历史流程实例的id。</entry>
                  </row>
                  <row>
                    <entry>commentId</entry>
                    <entry>Yes</entry>
                    <entry>String</entry>
                    <entry>评论的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <table>
            <title>删除历史流程实例的一条评论 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>204</entry>
                  <entry>表示找到了历史流程实例，并删除了评论。响应体为空。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到请求的历史流程实例，或历史流程实例不包含指定id的评论。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
  </section>
    <section>
    <title>获得单独历史任务实例</title>
    <para>
      <programlisting>GET history/historic-task-instances/{taskId}</programlisting>
    </para>
    <para>
      <table>
          <title>获得单独历史任务实例 - 响应码</title>
          <tgroup cols='2'>
            <thead>
              <row>
                <entry>响应码</entry>
                <entry>描述</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry>200</entry>
                <entry>表示找到了历史任务实例。</entry>
              </row>
              <row>
                <entry>404</entry>
                <entry>表示找不到历史任务实例。</entry>
              </row>
            </tbody>
         </tgroup>
      </table>
    </para>
    <para>
      <emphasis role="bold">成功响应体：</emphasis>
        <programlisting>
{
  "id" : "5",
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
  "processInstanceId" : "3",
  "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
  "executionId" : "4",
  "name" : "My task name",
  "description" : "My task description",
  "deleteReason" : null,
  "owner" : "kermit",
  "assignee" : "fozzie",
  "startTime" : "2013-04-17T10:17:43.902+0000",
  "endTime" : "2013-04-18T14:06:32.715+0000",
  "durationInMillis" : 86400056,
  "workTimeInMillis" : 234890,
  "claimTime" : "2013-04-18T11:01:54.715+0000",
  "taskDefinitionKey" : "taskKey",
  "formKey" : null,
  "priority" : 50,
  "dueDate" : "2013-04-20T12:11:13.134+0000",
  "parentTaskId" : null,
  "url" : "http://localhost:8182/history/historic-task-instances/5",
  "variables": null,
  "tenantId":null
}</programlisting>
      </para>
    </section>
    <section id="restHistoricTaskInstancesGet">
      <title>获取历史任务实例</title>
      <para>
        <programlisting>GET history/historic-task-instances</programlisting>
      </para>
      <para>
          <table>
            <title>获取历史任务实例 - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例id。</entry>
                </row>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的流程实例id。</entry>
                </row>
                <row>
                  <entry>processDefinitionKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的流程定义key。</entry>
                </row>
                <row>
                  <entry>processDefinitionKeyLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的流程定义key与指定值匹配。</entry>
                </row>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的流程定义id。</entry>
                </row>
                <row>
                  <entry>processDefinitionName</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的流程定义名称。</entry>
                </row>
                 <row>
                  <entry>processDefinitionNameLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的流程定义名称与指定值匹配。</entry>
                </row>
                <row>
                  <entry>processBusinessKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的流程实例businessKey。</entry>
                </row>
                <row>
                  <entry>processBusinessKeyLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的流程实例业务key与指定值匹配。</entry>
                </row>
                <row>
                  <entry>executionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的分支id。</entry>
                </row>
                <row>
                  <entry>taskDefinitionKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>流程的任务部分的流程定义key。</entry>
                </row>
                <row>
                  <entry>taskName</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的任务名称。</entry>
                </row>
                <row>
                  <entry>taskNameLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>对任务名称使用'like'查询历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskDescription</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的任务描述。</entry>
                </row>
                <row>
                  <entry>taskDescriptionLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>对任务描述使用'like'查询历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskDefinitionKey</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例对应的流程定义的任务定义key。</entry>
                </row>
                <row>
                  <entry>taskDeleteReason</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的删除任务原因。</entry>
                </row>
                <row>
                  <entry>taskDeleteReasonLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>对删除任务原因使用'like'查询历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskAssignee</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的负责人。</entry>
                </row>
                <row>
                  <entry>taskAssigneeLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>对负责人使用'like'查询历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskOwner</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的原拥有者。</entry>
                </row>
                <row>
                  <entry>taskOwnerLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>对原拥有者使用'like'查询历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskInvolvedUser</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的参与者。</entry>
                </row>
                <row>
                  <entry>taskPriority</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的优先级。</entry>
                </row>
                <row>
                  <entry>finished</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示是否历史任务实例已经结束了。</entry>
                </row>
                <row>
                  <entry>processFinished</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示历史任务实例的流程实例是否已经结束了。</entry>
                </row>
                <row>
                  <entry>parentTaskId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史任务实例的可能的上级任务id。</entry>
                </row>
                <row>
                  <entry>dueDate</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回指定持续时间的历史任务实例。</entry>
                </row>
                <row>
                  <entry>dueDateAfter</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回指定持续时间之后的历史任务实例。</entry>
                </row>
                <row>
                  <entry>dueDateBefore</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回指定持续时间之前的历史任务实例。</entry>
                </row>
                <row>
                  <entry>withoutDueDate</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>只返回没有设置持续时间的历史任务实例。当设置为<literal>false</literal>时会忽略这个参数。</entry>
                </row>
                <row>
                  <entry>taskCompletedOn</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回在指定时间完成的历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskCompletedAfter</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回在指定时间之后完成的历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskCompletedBefore</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回在指定时间之前完成的历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskCreatedOn</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回指定创建时间的历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskCreatedBefore</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回在指定时间前创建的历史任务实例。</entry>
                </row>
                <row>
                  <entry>taskCreatedAfter</entry>
                  <entry>否</entry>
                  <entry>Date</entry>
                  <entry>只返回在指定时间后创建的历史任务实例。</entry>
                </row>
                <row>
                  <entry>includeTaskLocalVariables</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示是否应该返回历史任务实例局部变量。</entry>
                </row>
                <row>
                  <entry>includeProcessVariables</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示是否应该返回历史任务实例全局变量。</entry>
                </row>
                <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的历史任务。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的历史任务。</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未设置tenantId的历史任务。如果为 <literal>false</literal>，会忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>获取历史任务实例 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示可以查询的历史任务实例。</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "name" : "My task name",
      "description" : "My task description",
      "deleteReason" : null,
      "owner" : "kermit",
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "workTimeInMillis" : 234890,
      "claimTime" : "2013-04-18T11:01:54.715+0000",
      "taskDefinitionKey" : "taskKey",
      "formKey" : null,
      "priority" : 50,
      "dueDate" : "2013-04-20T12:11:13.134+0000",
      "parentTaskId" : null,
      "url" : "http://localhost:8182/history/historic-task-instances/5",
      "taskVariables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ],
      "processVariables": [
        {
          "name": "processTest",
          "variableScope": "global",
          "value": "myProcessTest"
        }
      ],
	  "tenantId":null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>查询历史任务实例</title>
      <para>
        <programlisting>POST query/historic-task-instances</programlisting>
      </para>
      <para>
        <emphasis role="bold">查询历史任务实例 - 请求体：</emphasis>
        <programlisting>
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...

  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operation" : "equals",
      "type" : "long"
    }
  ]
}</programlisting>
      </para>
      <para>
	    所有支持的JSON参数字段和<link linkend="restHistoricTaskInstancesGet">获得历史任务实例集合</link>完全一样，但是传递的是JSON参数，而不是URL参数，这样可以支持更高级的参数，同时避免请求uri过长。除此之外，查询支持基于流程变量查询。
		<literal>taskVariables</literal>和<literal>processVariables</literal>属性是一个json数组，包含<link linkend="restQueryVariable">此处描述</link>的格式。
      </para>
      <para>
        <table>
            <title>查询历史任务实例 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回任务。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "name" : "My task name",
      "description" : "My task description",
      "deleteReason" : null,
      "owner" : "kermit",
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
      "workTimeInMillis" : 234890,
      "claimTime" : "2013-04-18T11:01:54.715+0000",
      "taskDefinitionKey" : "taskKey",
      "formKey" : null,
      "priority" : 50,
      "dueDate" : "2013-04-20T12:11:13.134+0000",
      "parentTaskId" : null,
      "url" : "http://localhost:8182/history/historic-task-instances/5",
      "taskVariables": [
        {
          "name": "test",
          "variableScope": "local",
          "value": "myTest"
        }
      ],
      "processVariables": [
        {
          "name": "processTest",
          "variableScope": "global",
          "value": "myProcessTest"
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>删除历史任务实例</title>
      <para>
        <programlisting>DELETE history/historic-task-instances/{taskId}</programlisting>
      </para>
      <para>
        <table>
            <title>响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表似乎删除了历史任务实例。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到历史任务实例。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    </section>
    <section>
      <title>获得历史任务实例的IdentityLink</title>
      <para>
        <programlisting>GET history/historic-task-instance/{taskId}/identitylinks</programlisting>
      </para>
      <para>
        <table>
            <title>响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回了IdentityLink。</entry>
                </row>
                 <row>
                  <entry>404</entry>
                  <entry>表示找不到任务实例。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
[
 {
  "type" : "assignee",
  "userId" : "kermit",
  "groupId" : null,
  "taskId" : "6",
  "taskUrl" : "http://localhost:8182/history/historic-task-instances/5",
  "processInstanceId" : null,
  "processInstanceUrl" : null
 }
]</programlisting>
      </para>
    </section>
    <section>
      <title>获取历史任务实例变量的二进制值</title>
      <para>
        <programlisting>GET history/historic-task-instances/{taskId}/variables/{variableName}/data</programlisting>
      </para>
      <para>
        <table>
            <title>获取历史任务实例变量的二进制值 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示找到了任务实例，并返回了请求的变量数据。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到任务实例，或任务实例不包含指定名称的变量，或变量没有有效的二进制流。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
	    响应体包含了变量的二进制值。当类型为 <literal>binary</literal>时，无论请求的accept-type头部设置了什么值，响应的content-type都为<literal>application/octet-stream</literal>。当类型为 <literal>serializable</literal>时， content-type为<literal>application/x-java-serialized-object</literal>。
      </para>
    </section>
    <section id="restHistoricActivityInstancesGet">
      <title>获取历史活动实例</title>
      <para>
        <programlisting>GET history/historic-activity-instances</programlisting>
      </para>
      <para>
          <table>
            <title>获取历史活动实例 - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>activityId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>活动实例id。</entry>
                </row>
                <row>
                  <entry>activityInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史活动实例id。</entry>
                </row>
                <row>
                  <entry>activityName</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史活动实例的名称。</entry>
                </row>
                <row>
                  <entry>activityType</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史活动实例的元素类型。</entry>
                </row>
                <row>
                  <entry>executionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史活动实例的分支id。</entry>
                </row>
                <row>
                  <entry>finished</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示历史活动实例是否完成。</entry>
                </row>
                <row>
                  <entry>taskAssignee</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史活动实例的负责人。</entry>
                </row>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史活动实例的流程实例id。</entry>
                </row>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史活动实例的流程定义id。</entry>
                </row>
                <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的实例。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的实例</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未设置tenantId的历史。如果为 <literal>false</literal>，会忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>获取历史活动实例 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示反悔了查询的历史活动实例。</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "activityId" : "4",
      "activityName" : "My user task",
      "activityType" : "userTask",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "taskId" : "4",
      "calledProcessInstanceId" : null,
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
	  "tenantId":null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>查询历史活动实例</title>
      <para>
        <programlisting>POST query/historic-activity-instances</programlisting>
      </para>
      <para>
        <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4"
}</programlisting>
      </para>
      <para>
	    所有支持的JSON参数字段和<link linkend="restHistoricTaskInstancesGet">获得历史任务实例集合</link>完全一样，但是传递的是JSON参数，而不是URL参数，这样可以支持更高级的参数，同时避免请求uri过长。
      </para>
      <para>
        <table>
            <title>查询历史活动实例 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求充公，并返回了活动。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "5",
      "activityId" : "4",
      "activityName" : "My user task",
      "activityType" : "userTask",
      "processDefinitionId" : "oneTaskProcess%3A1%3A4",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definitions/oneTaskProcess%3A1%3A4",
      "processInstanceId" : "3",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/3",
      "executionId" : "4",
      "taskId" : "4",
      "calledProcessInstanceId" : null,
      "assignee" : "fozzie",
      "startTime" : "2013-04-17T10:17:43.902+0000",
      "endTime" : "2013-04-18T14:06:32.715+0000",
      "durationInMillis" : 86400056,
	  "tenantId":null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section id="restHistoricVariableInstancesGet">
      <title>列出历史变量实例</title>
      <para>
        <programlisting>GET history/historic-variable-instances</programlisting>
      </para>
      <para>
          <table>
            <title>列出历史变量实例 - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史变量实例的流程实例id。</entry>
                </row>
                <row>
                  <entry>taskId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史变量实例的任务id。</entry>
                </row>
                <row>
                  <entry>excludeTaskVariables</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示从结果中排除任务变量。</entry>
                </row>
                <row>
                  <entry>variableName</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史变量实例的变量名称。</entry>
                </row>
                <row>
                  <entry>variableNameLike</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>对变量名称使用'like'操作历史变量实例。</entry>
                </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>列出历史变量实例 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示获得了历史变量实例。</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "14",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "taskId" : "6",
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      }
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>查询历史变量实例</title>
      <para>
        <programlisting>POST query/historic-variable-instances</programlisting>
      </para>
      <para>
        <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "processDefinitionId" : "oneTaskProcess%3A1%3A4",
  ...

  "variables" : [
    {
      "name" : "myVariable",
      "value" : 1234,
      "operation" : "equals",
      "type" : "long"
    }
  ]
}</programlisting>
      </para>
      <para>
	    所有支持的JSON参数字段和<link linkend="restHistoricVariableInstancesGet">获得历史变量实例集合</link>完全一样，但是传递的是JSON参数，而不是URL参数，这样可以支持更高级的参数，同时避免请求uri过长。除此之外，查询支持基于流程变量查询。
		<literal>variables</literal>属性是一个json数组，包含<link linkend="restQueryVariable">此处描述</link>的格式。
      </para>
      <para>
        <table>
            <title>查询历史变量实例 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回任务。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "14",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "taskId" : "6",
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      }
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>获取历史任务实例变量的二进制值</title>
      <para>
        <programlisting>GET history/historic-variable-instances/{varInstanceId}/data</programlisting>
      </para>
      <para>
        <table>
            <title>获取历史任务实例变量的二进制值 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示找到了变量实例，并返回了请求的变量数据。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到变量实例，或找不到对应名称的变量实例，或变量不包含合法的二进制流。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
      <emphasis role="bold">成功响应体：</emphasis>
	  响应体包含了变量的二进制值。当类型为 <literal>binary</literal>时，无论请求的accept-type头部设置了什么值，响应的content-type都为<literal>application/octet-stream</literal>。当类型为 <literal>serializable</literal>时， content-type为<literal>application/x-java-serialized-object</literal>。
    </para>
  </section>
    <section id="restHistoricDetailGet">
    <title>获取历史细节</title>
      <para>
        <programlisting>GET history/historic-detail</programlisting>
      </para>
      <para>
          <table>
            <title>获取历史细节 - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>id</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史细节的id。</entry>
                </row>
                <row>
                  <entry>processInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史细节的流程实例id。</entry>
                </row>
                <row>
                  <entry>executionId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史细节的分支id。</entry>
                </row>
                <row>
                  <entry>activityInstanceId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史细节的活动实例id。</entry>
                </row>
                <row>
                  <entry>taskId</entry>
                  <entry>否</entry>
                  <entry>String</entry>
                  <entry>历史细节的任务id。</entry>
                </row>
                <row>
                  <entry>selectOnlyFormProperties</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示结果中只返回FormProperties。</entry>
                </row>
                <row>
                  <entry>selectOnlyVariableUpdates</entry>
                  <entry>否</entry>
                  <entry>Boolean</entry>
                  <entry>表示结果中只返回变量更新信息。</entry>
                </row>
                <row>
                  <entry namest="c1" nameend="c4"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>获取历史细节 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示返回了查询的历史细节。</entry>
                </row>
                <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "26",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "executionId" : "6",
      "activityInstanceId", "10",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/history/historic-task-instances/6",
      "time" : "2013-04-17T10:17:43.902+0000",
      "detailType" : "variableUpdate",
      "revision" : 2,
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      },
      "propertyId", null,
      "propertyValue", null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>查询历史细节</title>
      <para>
        <programlisting>POST query/historic-detail</programlisting>
      </para>
      <para>
        <emphasis role="bold">请求体：</emphasis>
        <programlisting>
{
  "processInstanceId" : "5",
}</programlisting>
      </para>
      <para>
	    所有支持的JSON参数字段和<link linkend="restHistoricVariableInstancesGet">获得历史变量实例集合</link>完全一样，但是传递的是JSON参数，而不是URL参数，这样可以支持更高级的参数，同时避免请求uri过长。
      </para>
      <para>
        <table>
            <title>查询历史细节 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并返回了历史细节。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "id" : "26",
      "processInstanceId" : "5",
      "processInstanceUrl" : "http://localhost:8182/history/historic-process-instances/5",
      "executionId" : "6",
      "activityInstanceId", "10",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/history/historic-task-instances/6",
      "time" : "2013-04-17T10:17:43.902+0000",
      "detailType" : "variableUpdate",
      "revision" : 2,
      "variable" : {
        "name" : "myVariable",
        "variableScope", "global",
        "value" : "test"
      },
      "propertyId", null,
      "propertyValue", null
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>获取历史细节变量的二进制数据</title>
      <para>
        <programlisting>GET history/historic-detail/{detailId}/data</programlisting>
      </para>
      <para>
        <table>
            <title>获取历史细节变量的二进制数据 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示找到了历史细节实例，并返回了请求的变量数据。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到历史细节实例，或历史细节实例不包含指定名称的变量，或变量不包含合法的二进制流。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
	    响应体包含了变量的二进制值。当类型为 <literal>binary</literal>时，无论请求的accept-type头部设置了什么值，响应的content-type都为<literal>application/octet-stream</literal>。当类型为 <literal>serializable</literal>时， content-type为<literal>application/x-java-serialized-object</literal>。
      </para>
    </section>
  </section>
  <section>
    <title>表单</title>
    <section>
      <title>获取表单数据</title>
      <para>
        <programlisting>GET form/form-data</programlisting>
      </para>
      <para>
          <table>
            <title>获取表单数据 - URL参数</title>
            <tgroup cols='4'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>taskId</entry>
                  <entry>是（如果没有processDefinitionId）</entry>
                  <entry>String</entry>
                  <entry>获取表单数据需要对应的任务id。</entry>
                </row>
                <row>
                  <entry>processDefinitionId</entry>
                  <entry>是（如果没有taskId）</entry>
                  <entry>String</entry>
                  <entry>获取startEvent表单数据需要对应的流程定义id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <table>
            <title>获取表单数据 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示返回了查询的表单数据。</entry>
                </row>
                <row>
                  <entry>404</entry>
                  <entry>表示找不到表单数据。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">成功响应体：</emphasis>
          <programlisting>
{
  "data": [
    {
      "formKey" : null,
      "deploymentId" : "2",
      "processDefinitionId" : "3",
      "processDefinitionUrl" : "http://localhost:8182/repository/process-definition/3",
      "taskId" : "6",
      "taskUrl" : "http://localhost:8182/runtime/task/6",
      "formProperties" : [
        {
          "id" : "room",
          "name" : "Room",
          "type" : "string",
          "value" : null,
          "readable" : true,
          "writable" : true,
          "required" : true,
          "datePattern" : null,
          "enumValues" : [
            {
              "id" : "normal",
              "name" : "Normal bed"
            },
            {
              "id" : "kingsize",
              "name" : "Kingsize bed"
            },
          ]
        }
      ]
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</programlisting>
      </para>
    </section>
    <section>
      <title>提交任务表单数据</title>
      <para>
        <programlisting>POST form/form-data</programlisting>
      </para>
      <para>
        <emphasis role="bold">任务表单的请求体：</emphasis>
        <programlisting>
{
  "taskId" : "5",
  "properties" : [
    {
      "id" : "room",
      "value" : "normal"
    }
  ]
}</programlisting>
      </para>
      <para>
        <emphasis role="bold">startEvent表单的请求体：</emphasis>
        <programlisting>
{
  "processDefinitionId" : "5",
  "businessKey" : "myKey", (optional)
  "properties" : [
    {
      "id" : "room",
      "value" : "normal"
    }
  ]
}</programlisting>
      </para>
      <para>
        <table>
            <title>提交任务表单数据 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功，并提交了表单数据。</entry>
                </row>
                 <row>
                  <entry>400</entry>
                  <entry>表示传递了错误格式的参数。状态信息包含了详细信息。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
      <para>
        <emphasis role="bold">startEvent表单数据的成功响应体（任务表单数据没有响应）：</emphasis>
          <programlisting>
{
  "id" : "5",
  "url" : "http://localhost:8182/history/historic-process-instances/5",
  "businessKey" : "myKey",
  "suspended", false,
  "processDefinitionId" : "3",
  "processDefinitionUrl" : "http://localhost:8182/repository/process-definition/3",
  "activityId" : "myTask"
}</programlisting>
      </para>
    </section>
  </section>
  <section>
    <title>数据库表</title>
    <section>
      <title>表列表</title>
      <para>
        <programlisting>GET management/tables</programlisting>
      </para>
      <para>
        <table>
            <title>表列表 - 响应码</title>
            <tgroup cols='2'>
              <thead>
                <row>
                  <entry>响应码</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>200</entry>
                  <entry>表示请求成功。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
[
   {
      "name":"ACT_RU_VARIABLE",
      "url":"http://localhost:8182/management/tables/ACT_RU_VARIABLE",
      "count":4528
   },
   {
      "name":"ACT_RU_EVENT_SUBSCR",
      "url":"http://localhost:8182/management/tables/ACT_RU_EVENT_SUBSCR",
      "count":3
   },

   ...

]</programlisting>
    </para>
    </section>

    <section>
      <title>获得一张表</title>
        <para>
          <programlisting>GET management/tables/{tableName}</programlisting>
        </para>
        <para>
            <table>
              <title>获得一张表 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>tableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取表的名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
      "name":"ACT_RE_PROCDEF",
      "url":"http://localhost:8182/management/tables/ACT_RE_PROCDEF",
      "count":60
}</programlisting>
          <table>
              <title>获得一张表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示表存在，并返回了表的记录数。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示表不存在。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
    <section>
      <title>获得表的列信息</title>
        <para>
          <programlisting>GET management/tables/{tableName}/columns</programlisting>
        </para>
        <para>
            <table>
              <title>获得表的列信息 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>tableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取表的名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "tableName":"ACT_RU_VARIABLE",
   "columnNames":[
      "ID_",
      "REV_",
      "TYPE_",
      "NAME_",
      ...
   ],
   "columnTypes":[
      "VARCHAR",
      "INTEGER",
      "VARCHAR",
      "VARCHAR",
      ...
   ]
}</programlisting>
          <table>
              <title>获得表的列信息 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示表存在，并返回了表的列信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示表不存在。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>获得表的行数据</title>
        <para>
          <programlisting>GET management/tables/{tableName}/data</programlisting>
        </para>
        <para>
            <table>
              <title>获得表的行数据 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>tableName</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取表的名称。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
            <table>
              <title>获得表的行数据 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>start</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>从哪一行开始获取。默认为0。</entry>
                  </row>
                  <row>
                    <entry>size</entry>
                    <entry>否</entry>
                    <entry>Integer</entry>
                    <entry>获取行数，从<literal>start</literal>开始。默认为10。</entry>
                  </row>
                  <row>
                    <entry>orderAscendingColumn</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>对结果行进行排序的字段，正序。</entry>
                  </row>
                  <row>
                    <entry>orderDescendingColumn</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>对结果行进行排序的字段，倒序。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
  "total":3,
   "start":0,
   "sort":null,
   "order":null,
   "size":3,

   "data":[
      {
         "TASK_ID_":"2",
         "NAME_":"var1",
         "REV_":1,
         "TEXT_":"123",
         "LONG_":123,
         "ID_":"3",
         "TYPE_":"integer"
      },
      ...
   ]

}</programlisting>
          <table>
              <title>获得表的行数据 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示表存在，并返回了行数据。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示表不存在。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

</section>


<section>
    <title>引擎</title>
    <section>
      <title>获得引擎属性</title>
        <para>
          <programlisting>GET management/properties</programlisting>
        </para>
        <para>
		返回引擎内部使用的只读属性。
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "next.dbid":"101",
   "schema.history":"create(5.14)",
   "schema.version":"5.14"
}</programlisting>
          <table>
              <title>获得引擎属性 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示返回了属性。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获得引擎信息</title>
        <para>
          <programlisting>GET management/engine</programlisting>
        </para>
        <para>
		获得REST服务使用的引擎的只读信息。
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "name":"default",
   "version":"5.14",
   "resourceUrl":"file://activiti/activiti.cfg.xml",
   "exception":null
}</programlisting>
          <table>
              <title>获得引擎信息 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示返回了引擎信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
 </section>
<section>
  <title>运行时</title>
  <section>
      <title>接收信号事件</title>
        <para>
          <programlisting>POST runtime/signals</programlisting>
        </para>
        <para>
        提醒引擎，接收了一个信号事件，不会特别针对某个流程。
        </para>
        <para>
         <emphasis role="bold">JSON体：</emphasis>
           <programlisting>
{
  "signalName": "My Signal",
  "tenantId" : "execute",
  "async": true,
  "variables": [
      {"name": "testVar", "value": "This is a string"},
      ...
  ]
}</programlisting>
        <table>
              <title>接收信号事件 - JSON体参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>描述</entry>
                    <entry>必填</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>signalName</entry>
                    <entry>signal的名称</entry>
                    <entry>是</entry>
                  </row>
                  <row>
                    <entry>tenantId</entry>
                    <entry>信号事件应该执行在的tenantId</entry>
                    <entry>否</entry>
                  </row>
                  <row>
                    <entry>async</entry>
                    <entry>如果为 <literal>true</literal>，处理信号应该是异步的。返回码为 <literal>202 - Accepted</literal> 表示请求已接受，但尚未执行。如果为 <literal>false</literal>，会立即处理信号，结果为 (<literal>200 - OK</literal>) 会在成功完成后返回。如果忽略，默认为 <literal>false</literal> 。</entry>
                    <entry>否</entry>
                  </row>
                  <row>
                    <entry>variables</entry>
                    <entry>变量数组（通用的参数格式）用来向信号传递载荷。不能把 <literal>async</literal> 设置为 <literal>true</literal>，它会导致返回错误。</entry>
                    <entry>否</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
          <table>
              <title>接收信号事件 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示已经处理了信号，没有发生错误。</entry>
                  </row>
                  <row>
                    <entry>202</entry>
                    <entry>表示信号处理已经进入一个异步作业的队列，准备执行了。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>信号没有处理。缺少信号名，或同时使用了变量和异步，这是不允许的。响应体包含了错误的额外信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
 </section>


<section>
    <title>作业</title>
    <section>
      <title>获取一个作业</title>
        <para>
          <programlisting>GET management/jobs/{jobId}</programlisting>
        </para>
        <para>
            <table>
              <title>获取一个作业 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>jobId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取的作业id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"8",
   "url":"http://localhost:8182/management/jobs/8",
   "processInstanceId":"5",
   "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
   "processDefinitionId":"timerProcess:1:4",
   "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/timerProcess%3A1%3A4",
   "executionId":"7",
   "executionUrl":"http://localhost:8182/runtime/executions/7",
   "retries":3,
   "exceptionMessage":null,
   "dueDate":"2013-06-04T22:05:05.474+0000",
   "tenantId":null
}</programlisting>
          <table>
              <title>获取一个作业 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示作业存在，并成功返回。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示作业不存在。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>删除作业</title>
        <para>
          <programlisting>DELETE management/jobs/{jobId}</programlisting>
        </para>
        <para>
            <table>
              <title>删除作业 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>jobId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>期望删除的作业id。.</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>删除作业 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了作业，并成功删除。响应体为空。</entry>
                  </row>
                   <row>
                    <entry>404</entry>
                    <entry>表示找不到作业。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>执行作业</title>
        <para>
          <programlisting>POST management/jobs/{jobId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "action" : "execute"
}</programlisting>
        <table>
              <title>执行作业 - 请求的JSON参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>描述</entry>
                    <entry>是否必填</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>action</entry>
                    <entry>执行的操作。只支持<literal>execute</literal>。</entry>
                    <entry>是</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>执行作业 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示成功执行了操作。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到作业。</entry>
                  </row>
                  <row>
                    <entry>500</entry>
                    <entry>表示执行作业时出现了异常。状态描述包含了错误的详细信息。如果需要可以后续获取错误堆栈。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

 <section>
      <title>获得作业的异常堆栈</title>
        <para>
          <programlisting>GET management/jobs/{jobId}/exception-stracktrace</programlisting>
        </para>
        <para>
        <table>
              <title>获得作业的异常堆栈 - URL参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>描述</entry>
                    <entry>是否必填</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>jobId</entry>
                    <entry>获取堆栈的作业id。</entry>
                    <entry>是</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <table>
              <title>获得作业的异常堆栈 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了作业，并返回了堆栈。响应包含了原始堆栈，Content-Type永远是<literal>text/plain</literal>。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到作业，或作业不包含错误堆栈。状态描述包含错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

 <section>
      <title>获得作业列表</title>
        <para>
          <programlisting>GET management/jobs</programlisting>
        </para>
        <para>
        <table>
              <title>获得作业列表 - URL参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>描述</entry>
                    <entry>类型</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>只返回指定id的作业。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>processInstanceId</entry>
                    <entry>只返回指定id流程一部分的作业。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>executionId</entry>
                    <entry>只返回指定id分支一部分的作业。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>processDefinitionId</entry>
                    <entry>只返回指定流程定义id的作业。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>withRetriesLeft</entry>
                    <entry>如果为 <literal>true</literal>，只返回尝试剩下的。如果为false，会忽略此参数。</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>executable</entry>
                    <entry>如果为 <literal>true</literal>，只返回可执行的作业。如果为false，会忽略此参数。</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>timersOnly</entry>
                    <entry>如果为 <literal>true</literal>，只返回类型为定时器的作业。如果为false，会忽略此参数。不能与<literal>'messagesOnly'</literal>一起使用。</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>messagesOnly</entry>
                    <entry>如果为 <literal>true</literal>，只返回类型为消息的作业。如果为false，会忽略此参数。不能与<literal>'timersOnly'</literal>一起使用。</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>withException</entry>
                    <entry>如果为 <literal>true</literal>，只返回执行时出现了异常的作业。如果为false，会忽略此参数。</entry>
                    <entry>Boolean</entry>
                  </row>
                  <row>
                    <entry>dueBefore</entry>
                    <entry>只返回在指定时间前到期的作业。如果使用了这个参数，就不会返回没有设置持续时间的作业。</entry>
                    <entry>Date</entry>
                  </row>
                  <row>
                    <entry>dueAfter</entry>
                    <entry>只返回在指定时间后到期的作业。如果使用了这个参数，就不会返回没有设置持续时间的作业。</entry>
                    <entry>Date</entry>
                  </row>
                  <row>
                    <entry>exceptionMessage</entry>
                    <entry>Only return jobs with the given exception message</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>tenantId</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回指定tenantId的作业。</entry>
                  </row>
                 <row>
                    <entry>tenantIdLike</entry>
                    <entry>否</entry>
                    <entry>String</entry>
                    <entry>只返回与指定tenantId匹配的作业。</entry>
                  </row>
                  <row>
                    <entry>withoutTenantId</entry>
                    <entry>否</entry>
                    <entry>Boolean</entry>
                    <entry>如果为 <literal>true</literal>，只返回未设置tenantId的作业。如果为 <literal>false</literal>，会忽略 <literal>withoutTenantId</literal> 参数。</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>对结果进行排序的字段，可以是 <literal>id</literal>, <literal>dueDate</literal>, <literal>executionId</literal>, <literal>processInstanceId</literal>， <literal>retries</literal>或<literal>tenantId</literal>其中之一。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c3"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"13",
         "url":"http://localhost:8182/management/jobs/13",
         "processInstanceId":"5",
         "processInstanceUrl":"http://localhost:8182/runtime/process-instances/5",
         "processDefinitionId":"timerProcess:1:4",
         "processDefinitionUrl":"http://localhost:8182/repository/process-definitions/timerProcess%3A1%3A4",
         "executionId":"12",
         "executionUrl":"http://localhost:8182/runtime/executions/12",
         "retries":0,
         "exceptionMessage":"Can't find scripting engine for 'unexistinglanguage'",
         "dueDate":"2013-06-07T10:00:24.653+0000"
      },

      ...
   ],
   "total":2,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":2
}</programlisting>
          <table>
              <title>获得作业列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示返回了作业。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示在url参数中使用了非法的值，或参数中同时使用了<literal>'messagesOnly'</literal> 和 <literal>'timersOnly'</literal>。状态描述包含了错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

</section>

<section>
  <title>用户</title>

  <section>
      <title>获得一个用户</title>
        <para>
          <programlisting>GET identity/users/{userId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得一个用户 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>userId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>获取用户的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"testuser",
   "firstName":"Fred",
   "lastName":"McDonald",
   "url":"http://localhost:8182/identity/users/testuser",
   "email":"no-reply@activiti.org"
}</programlisting>
          <table>
              <title>获得一个用户 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示用户存在，并成功返回。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示用户不存在。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>获取用户列表</title>
        <para>
          <programlisting>GET identity/users</programlisting>
        </para>
        <para>
        <table>
              <title>获取用户列表 - URL参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>描述</entry>
                    <entry>类型</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>只返回指定id的用户。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>firstName</entry>
                    <entry>只返回指定firstname的用户。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>lastName</entry>
                    <entry>只返回指定lastname的用户。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>email</entry>
                    <entry>只返回指定email的用户。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>firstNameLike</entry>
                    <entry>只返回firstname与指定值匹配的用户。使用<literal>%</literal>通配符。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>lastNameLike</entry>
                    <entry>只返回lastname与指定值匹配的用户。使用<literal>%</literal>通配符。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>emailLike</entry>
                    <entry>只返回email与指定值匹配的用户。使用<literal>%</literal>通配符。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>memberOfGroup</entry>
                    <entry>只返回指定组成员的用户。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>potentialStarter</entry>
                    <entry>只返回指定流程定义id的默认启动人。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>结果排序的字段，应该是<literal>id</literal>, <literal>firstName</literal>, <literal>lastname</literal> 或 <literal>email</literal>其中之一。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c3"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
      {
         "id":"anotherUser",
         "firstName":"Tijs",
         "lastName":"Barrez",
         "url":"http://localhost:8182/identity/users/anotherUser",
         "email":"no-reply@alfresco.org"
      },
      {
         "id":"kermit",
         "firstName":"Kermit",
         "lastName":"the Frog",
         "url":"http://localhost:8182/identity/users/kermit",
         "email":null
      },
      {
         "id":"testuser",
         "firstName":"Fred",
         "lastName":"McDonald",
         "url":"http://localhost:8182/identity/users/testuser",
         "email":"no-reply@activiti.org"
      }
   ],
   "total":3,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":3
}</programlisting>
          <table>
              <title>获取用户列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功返回了请求的用户。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

  <section>
      <title>更新用户</title>
        <para>
          <programlisting>PUT identity/users/{userId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "firstName":"Tijs",
  "lastName":"Barrez",
  "email":"no-reply@alfresco.org",
  "password":"pass123"
}</programlisting>
      所有请求值都是可选的。比如，你可以在请求体JSON对象中只包含'firstName'属性，只更新用户的firstName，其他值都不受影响。当包含的属性设置为null，用户的属性会被更新为null，比如：<literal>{"firstName" : null}</literal>会清空用户的firstName。
       </para>
        <para>
          <table>
              <title>更新用户 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功更新了用户。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到用户。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示请求的用户被其他地方更新了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考 <literal>identity/users/{userId}</literal>的响应。
      </para>
  </section>

   <section>
      <title>创建用户</title>
        <para>
          <programlisting>POST identity/users</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
  "id":"tijs",
  "firstName":"Tijs",
  "lastName":"Barrez",
  "email":"no-reply@alfresco.org",
  "password":"pass123"
}</programlisting>
       </para>
        <para>
          <table>
              <title>创建用户 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示成功创建了用户。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示没有传用户的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考 <literal>identity/users/{userId}</literal>的响应。
      </para>
  </section>

  <section>
      <title>删除用户</title>
         <para>
        <programlisting>DELETE identity/users/{userId}</programlisting>
      </para>
      <para>
          <table>
            <title>删除用户 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望删除的用户id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>删除用户 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了用户，并成功删除了。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到用户。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
      <title>获取用户图片</title>
         <para>
        <programlisting>GET identity/users/{userId}/picture</programlisting>
      </para>
      <para>
          <table>
            <title>获取用户图片 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望获得图片的用户id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
		  响应体包含了演示图片数据，展示用户的图片。响应的Content-Type对应着创建图片时设置的mimeType。
          <table>
              <title>获取用户图片 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了用户和图片，图片在响应体中返回。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到用户，或用户没有图片。状态描述包含错误的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>更新用户图片</title>
         <para>
        <programlisting>GET identity/users/{userId}/picture</programlisting>
      </para>
      <para>
          <table>
            <title>更新用户图片 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>获得图片对应的用户id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
       <emphasis role="bold">请求体：</emphasis>
           请求应该是<literal>multipart/form-data</literal>类型。应该只有一个文件区域，包含源码的二进制内容。除此之外，需要提供以下表单域：
        <itemizedlist>
            <listitem>
              <para><literal>mimeType</literal>：上传的图片的mime-type。如果省略，默认会使用 <literal>image/jpeg</literal> 作为图片的mime-type。</para>
            </listitem>
        </itemizedlist>
        </para>
        <para>
          <table>
              <title>更新用户图片 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了用户，并更新了图片。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到用户。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>列出用户列表</title>
         <para>
        <programlisting>PUT identity/users/{userId}/info</programlisting>
      </para>
      <para>
          <table>
            <title>列出用户列表 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>获取信息的用户id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
<programlisting>
[
   {
      "key":"key1",
      "url":"http://localhost:8182/identity/users/testuser/info/key1"
   },
   {
      "key":"key2",
      "url":"http://localhost:8182/identity/users/testuser/info/key2"
   }
]</programlisting>
          <table>
              <title>列出用户列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了用户，并返回了信息列表（key和url）。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到用户。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>获取用户信息</title>
         <para>
        <programlisting>GET identity/users/{userId}/info/{key}</programlisting>
      </para>
      <para>
          <table>
            <title>获取用户信息 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>获取信息的用户id。</entry>
                </row>
                <row>
                  <entry>key</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>希望获取的用户信息的key。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
<programlisting>
{
   "key":"key1",
   "value":"Value 1",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</programlisting>
          <table>
              <title>获取用户信息 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了用户和指定key的用户信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到用户，并用户没有指定key的信息。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>更新用户的信息</title>
         <para>
        <programlisting>PUT identity/users/{userId}/info/{key}</programlisting>
      </para>
      <para>
          <table>
            <title>更新用户的信息 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望更新的信息对应的用户id。</entry>
                </row>
                <row>
                  <entry>key</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望更新的用户信息的key。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
       <para>
          <emphasis role="bold">请求体：</emphasis>
<programlisting>
{
   "value":"The updated value"
}</programlisting>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
<programlisting>
{
   "key":"key1",
   "value":"The updated value",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</programlisting>
          <table>
              <title>更新用户的信息 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示找到了用户，并更新了信息。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体中缺少数据。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找到用户，或找不到指定key的用户信息。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

   <section>
      <title>创建用户信息条目</title>
         <para>
        <programlisting>POST identity/users/{userId}/info</programlisting>
      </para>
      <para>
          <table>
            <title>创建用户信息条目 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望创建信息的用户id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
       <para>
          <emphasis role="bold">请求体：</emphasis>
<programlisting>
{
   "key":"key1",
   "value":"The value"
}</programlisting>
      </para>
        <para>
          <emphasis role="bold">响应体：</emphasis>
<programlisting>
{
   "key":"key1",
   "value":"The value",
   "url":"http://localhost:8182/identity/users/testuser/info/key1"
}</programlisting>
          <table>
              <title>创建用户信息条目 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示找到了用户，并创建了信息。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示请求体中缺少key或value。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到用户。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示用户已经有了一条指定key的信息条目，可以更新资源实例（<literal>PUT</literal>）。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>删除用户的信息</title>
         <para>
        <programlisting>DELETE identity/users/{userId}/info/{key}</programlisting>
      </para>
      <para>
          <table>
            <title>删除用户的信息 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>希望删除信息的用户id。</entry>
                </row>
                <row>
                  <entry>key</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望删除的用户信息的key。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>删除用户的信息 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了用户和信息，并删除了指定key的条目。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到用户，或用户不包含指定key的信息。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

</section>
<section>
  <title>群组</title>
   <section>
      <title>获得群组</title>
        <para>
          <programlisting>GET identity/groups/{groupId}</programlisting>
        </para>
        <para>
            <table>
              <title>获得群组 - URL参数</title>
              <tgroup cols='3'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>是否必须</entry>
                    <entry>值</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>groupId</entry>
                    <entry>是</entry>
                    <entry>String</entry>
                    <entry>希望获得的群组id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "id":"testgroup",
   "url":"http://localhost:8182/identity/groups/testgroup",
   "name":"Test group",
   "type":"Test type"
}</programlisting>
          <table>
              <title>获得群组 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示群组存在，并成功返回。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示群组不存在。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>

  <section>
      <title>获取群组列表</title>
        <para>
          <programlisting>GET identity/groups</programlisting>
        </para>
        <para>
        <table>
              <title>获取群组列表 - URL参数</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>参数</entry>
                    <entry>描述</entry>
                    <entry>类型</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>id</entry>
                    <entry>只返回指定id的群组。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>name</entry>
                    <entry>只返回指定名称的群组。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>type</entry>
                    <entry>只返回指定类型的群组。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>nameLike</entry>
                    <entry>只返回名称与指定值匹配的群组使用<literal>%</literal>作为通配符。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>member</entry>
                    <entry>只返回成员与指定用户ing相同的群组。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>potentialStarter</entry>
                    <entry>只返回成员作为指定id流程定义的潜在启动者的劝阻。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry>sort</entry>
                    <entry>结果排序的字段。应该是 <literal>id</literal>, <literal>name</literal> 或 <literal>type</literal>其中之一。</entry>
                    <entry>String</entry>
                  </row>
                  <row>
                    <entry namest="c1" nameend="c3"><para>可以使用通用的 <link linkend="restPagingAndSort">分页和排序查询参数</link> 。</para></entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
         <para>
          <emphasis role="bold">成功响应体：</emphasis>
            <programlisting>
{
   "data":[
     {
        "id":"testgroup",
        "url":"http://localhost:8182/identity/groups/testgroup",
        "name":"Test group",
        "type":"Test type"
     },

      ...
   ],
   "total":3,
   "start":0,
   "sort":"id",
   "order":"asc",
   "size":3
}</programlisting>
          <table>
              <title>获取群组列表 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示返回了请求的群组。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
 </section>

  <section>
      <title>更新群组</title>
        <para>
          <programlisting>PUT identity/groups/{groupId}</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
   "name":"Test group",
   "type":"Test type"
}</programlisting>
      所有请求值都是可选的。比如，你可以在请求体JSON对象中只包含'name'属性，只更新群组的名称，其他属性都不会受到英系那个。如果把一个属性设置为null，群组的数据就会更新为null。
       </para>
        <para>
          <table>
              <title>更新群组 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>200</entry>
                    <entry>表示成功更新了群组。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的群组。</entry>
                  </row>
                  <row>
                    <entry>409</entry>
                    <entry>表示请求的群组正在被其他地方更新。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考<literal>identity/groups/{groupId}</literal>的响应。
      </para>
  </section>

   <section>
      <title>创建群组</title>
        <para>
          <programlisting>POST identity/groups</programlisting>
        </para>
        <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
   "id":"testgroup",
   "name":"Test group",
   "type":"Test type"
}</programlisting>
       </para>
        <para>
          <table>
              <title>创建群组 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示创建了群组。</entry>
                  </row>
                  <row>
                    <entry>400</entry>
                    <entry>表示丢失了群组的id。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
    <para>
       <emphasis role="bold">成功响应体：</emphasis> 参考 <literal>identity/groups/{groupId}</literal>的响应。
      </para>
  </section>

  <section>
      <title>删除群组</title>
         <para>
        <programlisting>DELETE identity/groups/{groupId}</programlisting>
      </para>
      <para>
          <table>
            <title>删除群组 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>groupId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望删除的群组id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>删除群组 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了群组，并成功删除了。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的群组。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
  </section>
  <section>
    <title>获取群组的成员</title>
    <para> <literal>identity/groups/members</literal>不允许使用GET。使用 <literal>identity/users?memberOfGroup=sales</literal> URL来获得某个群组下的所有成员。</para>
  </section>
  <section>
      <title>为群组添加一个成员</title>
         <para>
        <programlisting>POST identity/groups/{groupId}/members</programlisting>
      </para>
      <para>
          <table>
            <title>为群组添加一个成员 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>groupId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望添加成员的群组id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
       <para>
         <emphasis role="bold">请求JSON体：</emphasis>
           <programlisting>
{
   "userId":"kermit"
}</programlisting>
       </para>
        <para>
          <table>
              <title>为群组添加一个成员 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>201</entry>
                    <entry>表示找到了群组，并添加了成员。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示请求体中未包含userId。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的群组。</entry>
                  </row>
                   <row>
                    <entry>409</entry>
                    <entry>表示请求的用户已经是群组的一员了。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
         <emphasis role="bold">响应体：</emphasis>
           <programlisting>
{
   "userId":"kermit",
   "groupId":"sales",
    "url":"http://localhost:8182/identity/groups/sales/members/kermit"
}</programlisting>
       </para>
  </section>
  <section>
      <title>删除群组的成员</title>
         <para>
        <programlisting>DELETE identity/groups/{groupId}/members/{userId}</programlisting>
      </para>
      <para>
          <table>
            <title>删除群组的成员 - URL参数</title>
            <tgroup cols='3'>
              <thead>
                <row>
                  <entry>参数</entry>
                  <entry>是否必填</entry>
                  <entry>数据</entry>
                  <entry>描述</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>groupId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望删除成员的群组id。</entry>
                </row>
                <row>
                  <entry>userId</entry>
                  <entry>是</entry>
                  <entry>String</entry>
                  <entry>期望删除的用户id。</entry>
                </row>
              </tbody>
           </tgroup>
        </table>
      </para>
        <para>
          <table>
              <title>删除群组的成员 - 响应码</title>
              <tgroup cols='2'>
                <thead>
                  <row>
                    <entry>响应码</entry>
                    <entry>描述</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>204</entry>
                    <entry>表示找到了群组，并删除了成员。响应体为空。</entry>
                  </row>
                  <row>
                    <entry>404</entry>
                    <entry>表示找不到请求的群组，或用户不是群组的成员。状态描述中包含了错误相关的详细信息。</entry>
                  </row>
                </tbody>
             </tgroup>
          </table>
        </para>
        <para>
         <emphasis role="bold">响应体：</emphasis>
           <programlisting>
{
   "userId":"kermit",
   "groupId":"sales",
    "url":"http://localhost:8182/identity/groups/sales/members/kermit"
}</programlisting>
       </para>
  </section>

</section>

<!-- Legacy -->
  <section>

    <title>传统REST - 通用方法</title>
    <para><emphasis role="bold">下面的章节中包含了传统的REST-api，它们在5.14版本中已经废弃了。REST url不会在未来删除，但是也不会维护了。未来的所有改进都会放到新REST API中。</emphasis></para>
    <para>
	  Activiti包含了一套引擎的REST API，可以把activiti-rest.war部署到像Apache Tomcat一样的Servlet容器里。
	  默认Activiti引擎会连接一个单独运行的h2数据库。你可以修改WEB-INF/classes目录下的db.properties文件来修改数据库配置。
	  REST API使用JSON格式（http://www.json.org），内部使用Restlet构建（http://www.restlet.org）。
    </para>

    <para>
      每个REST API调用都会使用单独的校验级别，你必须登录到系统中，来调用REST API（除了/login服务）。
	  认证是通过Basic HTTP认证实现的，如果你登录为管理员（比如kermit），
	  你应该可以访问下面介绍的所有接口。
    </para>

    <para>
	  API遵守着通常的REST API约定，对读取操作使用GET，对创建对象使用POST，
	  对更新和执行操作使用PUT，对删除对象使用DELETE。在执行应先过很多次对象的操作时，
	  使用POST来执行这些操作来保证传递的参数不受限制。
	  使用POST的原因是HTTP DELETE方法不允许使用请求体。
	  使用DELETE的调用，理论上，它的请求体会被代理剔除。
	  为了保证不发生这种事情，我们使用了POST，虽然PUT也可以更新多个对象，
	  为了保持一致。
    </para>

    <para>
	  所有rest调用都使用"application/json"作为Content-Type（除了上传请求使用"multipart/form-data"）。
    </para>

    <para>
	  执行REST调用的url基础地址是http://localhost:8080/activiti-rest/service/。
	  比如，列出引擎中流程定义的方法，在你的浏览器中应该是：
      http://localhost:8080/activiti-rest/service/process-definitions
    </para>

    <para>
	  你就也可以使用curl来通过REST API执行查询，比如：
      <programlisting>curl --basic --user kermit:kermit http://localhost:8080/activiti-rest/service/tasks?assignee=kermit</programlisting>
    </para>

    <para>
	  请参考下面的描述，来了解哪些REST API是目前可用的。
	  请参考"API"章节作为，“一行的注释”，来了解核心API的功能，实现REST API的调用。
    </para>

  </section>

  <section>

    <!-- REPOSITORY -->

    <title>资源</title>

    <section>
      <title>上传发布</title>
      <para>
        上传并安装发布.bpmn20.xml, .bpmn, .bar 或 .zip格式，使用普通的“html表单上传”（enctype=multipart/form-data）
		换句话说不是json请求。如果发布操作成功，发布信息会包含在返回的响应中。
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">请求：</emphasis>
            <literal>POST /deployment</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createDeployment().name(fileName).deploymentBuilder.deploy()</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples"
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>获取发布</title>
      <para>
	    返回分页发布列表，可以通过"id", "name" 或 "deploymentTime"排序。
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">请求：</emphasis>
            <literal>GET /deployments?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createDeploymentQuery().listPage()</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "data": [
    {
      "id": "10",
      "name": "activiti-examples.bar",
      "deploymentTime": "2010-10-13T14:54:26.750+02:00",
      "category": "examples"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>获取发布资源</title>
      <para>
	    返回发布的所有资源。
        实例： /deployment/10/resources
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">请求：</emphasis>
            <literal>GET /deployment/{deploymentId}/resources</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().getDeploymentResourceNames(deploymentId)</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "id": "10",
  "name": "activiti-examples.bar",
  "deploymentTime": "2010-10-13T14:54:26.750+02:00",
  "category": "examples",
  "resources": ["resource1", "resource2"]
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>获取发布的一个资源</title>
      <para>
	    获取发布的一个资源。
        实例： /deployment/10/resource/org/activiti/examples/bpmn/usertask/FinancialReportProcess.bpmn20.xml
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">请求：</emphasis>
            <literal>GET /deployment/{deploymentId}/resource/{resourceName}</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().getResourceAsStream(deploymentId, resourceName)</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>比如，一个.bpmn20.xml文件，一个图片或其他发布资源包含的文件类型。</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>删除发布</title>
      <para>
	    删除一个发布。
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">请求：</emphasis>
            <literal>DELETE /deployment/{deploymentId}?cascade={cascade?}</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().deleteDeployment(deploymentId)</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "success": true
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>删除发布</title>
      <para>
	    删除多个发布。
      </para>
      <itemizedlist>
        <listitem>
          <para>
            <emphasis role="bold">请求：</emphasis>
            <literal>POST /deployments/delete?cascade={cascade?}</literal>
            <programlisting>
{
"deploymentIds": [ "10", "11" ]
}</programlisting>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">API: </emphasis>
            <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().deleteDeployment(deploymentId)</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            <emphasis role="bold">响应：</emphasis>
            <programlisting>
{
  "success": true
}</programlisting>
          </para>
        </listitem>
      </itemizedlist>
    </section>

  </section>

  <!-- ENGINE -->

    <section>

      <title>引擎</title>

      <section>
        <title>获取流程引擎</title>
        <para>
		  返回流程引擎安装细节。如果启动时出现了问题，
		  错误的细节会包含在响应的"exception"属性中。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /process-engine</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API: </emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "name": "default",
  "resourceUrl": "jar:file:\//&lt;path-to-deployment&gt;\/activiti-cfg.jar!\/activiti.properties",
  "exception": null,
  "version": "5.11"
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    </section>

    <!-- PROCESSES -->

    <section>

      <title>流程</title>

      <section>
        <title>流程定义列表</title>
        <para>
		  返回发布的流程定义的信息，可以通过"id", "name", "version" 或
          "deploymentId"排序。BPMN2.0 XML的流程图的名字包含在"resourceName"属性中，
		  结合"deploymentId"属性，可以通过上面的获取发布资源REST API调用获得。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">分页请求：</emphasis>
              <literal>GET /process-definitions?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRepositoryService().createProcessDefinitionQuery().listPage()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">分页响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "financialReport:1",
      "key": "financialReport",
      "version": 1,
      "name": "Monthly financial report",
      "resourceName": "org/activiti/examples/bpmn/usertask/FinancialReportProcess.bpmn20.xml",
      "diagramResourceName": "org/activiti/examples/bpmn/usertask/FinancialReportProcess.png",
      "deploymentId": "10",
      "startFormResourceKey": null,
      "isGraphicNotationDefined": true
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>获得流程定义表单属性</title>
        <para>
		  返回流程定义表单属性。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /process-definition/{processDefinitionId}/properties</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getFormService().getStartFormData(processDefinitionId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
                "data": [
    {
      "id": "fullName",
      "name": "Full name",
      "value": "${name}",
      "type": "String",
      "required": false,
      "readable": true,
      "writeable": true
    }
  ]
              </programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>获得流程定义表单资源</title>
        <para>
		  返回流程定义表单。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /process-definition/{processDefinitionId}/form</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().getRenderedStartFormById(processDefinitionId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>&lt;user-defined-response&gt;</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
          <title>获取流程定义图</title>
          <para>
		  如果存在，就返回一个流程定义的PNG图。
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">请求：</emphasis>
                <literal>GET /process-definition/{processDefinitionId}/diagram</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>repositoryService.getResourceAsStream(processDefinition.getDeploymentId(), processDefinition.getDiagramResourceName());</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">响应：</emphasis>
                <programlisting>流程定义的PNG图。</programlisting>
              </para>
            </listitem>
          </itemizedlist>
      </section>

      <section>
        <title>启动流程实例</title>
        <para>
		  根据流程定义创建流程实例，返回新创建流程实例的细节信息。
		  可以使用请求体对象传递额外的变量（通过表单）。换句话说，
		  就是"processDefinitionId"属性旁边的属性。
        </para>
        <para>
          注意如果提交的值为true（不是"true"），会被当做Boolean，即使没有使用描述符。
		  这与数字的处理方式相同。比如，123会当做整数。
		  "123"会当做字符串（除非使用描述符定义）。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>POST /process-instance</literal>
              <programlisting>
{
  "processDefinitionId":"financialReport:1:1700",
  "businessKey":"order-4711"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getRuntimeService().startProcessInstanceById(processDefinitionId[, businessKey][, variables])</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "id": "217",
  "processDefinitionId": "financialReport:1:1700",
  "businessKey": "order-4711",
  "processInstanceId": "217"
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

        <section>
          <title>流程实例列表</title>
          <para>
		    返回活动的流程实例细节，可以通过"id", "startTime", "businessKey" 或
            "processDefinitionId"排序。你可以使用"processDefinitionId" and "businessKey"进行查询。
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">分页请求：</emphasis>
                <literal>GET /process-instances?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}&amp;businessKey={businessKey}&amp;processDefinitionId={processDefinitionId}</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getHistoryService().createHistoricProcessInstanceQuery().xxx.listPages()</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">分页响应：</emphasis>
                <programlisting>
  {
    "data": [
      {
        "id": "2",
        "processDefinitionId": "financialReport:1",
        "businessKey": "55",
        "startTime": "2010-10-13T14:54:26.750+02:00",
        "startUserId": "kermit"
      }
    ],
    "total": 1,
    "start": 0,
    "sort": "id",
    "order": "asc",
    "size": 1
  }</programlisting>
              </para>
            </listitem>
          </itemizedlist>
        </section>

        <section>
          <title>获得流程实例细节</title>
          <para>
		    返回指定流程实例的所有细节。可以是运行中或已结束的流程实例。
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">请求：</emphasis>
                <literal>GET /process-instance/{processInstanceId}</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getHistoryService().createHistoricProcessInstanceQuery().processInstanceId(..).singleResult()</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">响应：</emphasis>
                <programlisting>
  {
    "id": "2",
    "processDefinitionId": "financialReport:1",
    "businessKey": "55",
    "startTime": "2010-10-13T14:54:26.750+02:00",
    "startActivityId": "startFinancialAnalysis",
    "startUserId": "kermit",
    "completed": false,
    "tasks": [
      {
        "taskId": "3",
        "taskName": "Analyze report",
        "owner": null,
        "assignee": "Kermit",
        "startTime": "2010-10-13T14:53:26.750+02:00",
        "completed": false
      }
    ],
    "activities": [
      {
        "activityId": "4",
        "activityName": "Get report",
        "activityType": "ServiceTask",
        "startTime": "2010-10-13T14:53:25.750+02:00",
        "completed": true,
        "startTime": "2010-10-13T14:53:25.950+02:00",
        "duration": 200
      }
    ],
    "variables": [
      {
        "variableName": "reportName",
        "variableValue": "classified.pdf",
      }
    ]
    "historyVariables": [
      {
        "variableName": "reportName",
        "variableValue": "classified.pdf",
        "variableType": "String",
        "revision": 1,
        "time": "2010-10-13T14:53:26.750+02:00"
      }
    ]

  }</programlisting>
              </para>
            </listitem>
          </itemizedlist>
        </section>

        <section>
            <title>获得流程实例图</title>
            <para>
			返回高亮的活动流程PNG图。如果流程定义未包含DI信息就会返回404。
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <emphasis role="bold">请求：</emphasis>
                  <literal>GET /process-instance/{processInstanceId}/diagram</literal>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">API:</emphasis>
                  <literal>ProcessDiagramGenerator.generateDiagram(pde, "png", getRuntimeService().getActiveActivityIds(processInstanceId));</literal>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">响应：</emphasis>
                  <programlisting>返回高亮的活动流程PNG图。</programlisting>
                </para>
              </listitem>
            </itemizedlist>
        </section>

        <section>
            <title>获得流程实例的任务</title>
            <para>
			返回运行中流程实例的任务列表。
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <emphasis role="bold">请求：</emphasis>
                  <literal>GET /process-instance/{processInstanceId}/tasks</literal>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">API:</emphasis>
                  <literal>taskService.createTaskQuery().processInstanceId(processInstanceId);</literal>
                </para>
              </listitem>
              <listitem>
            <para>
              <emphasis role="bold">分页响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
         </itemizedlist>
        </section>
        <section>
            <title>继续特定流程实例的活动（receiveTask）</title>
            <para>
			继续一个活动分支（receiveTask）。
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <emphasis role="bold">请求：</emphasis>
                  <literal>POST /process-instance/{processInstanceId}/signal</literal>
                  <programlisting>
{
  "activityId":"receiveTask",
  "variable1":"value",
  "variable2":"value"
}</programlisting>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">API:</emphasis>
                  <literal>runtimeService.signal(execution.getId(), variables);</literal>
                </para>
              </listitem>
              <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
         </itemizedlist>
        </section>

        <section>
            <title>触发特定流程实例的信号</title>
            <para>
			向特定流程实例发送一个信号，会触发所有订阅的信号事件。可以通过请求体发送额外的变量。
			如果你不想发送任何变量，可以使用空的请求体。
            </para>
            <itemizedlist>
              <listitem>
                <para>
                  <emphasis role="bold">请求：</emphasis>
                  <literal>POST /process-instance/{processInstanceId}/event/{signalName}</literal>
                  <programlisting>
{
  "variable1":"value",
  "variable2":"value"
}</programlisting>
                </para>
              </listitem>
              <listitem>
                <para>
                  <emphasis role="bold">API:</emphasis>
                  <literal>runtimeService.signalEventReceived(signalName, execution.getId()[, variables]);</literal>
                </para>
              </listitem>
              <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
         </itemizedlist>
        </section>

    </section>



    <!-- TASKS -->

    <section>

      <title>任务</title>

      <section>
        <title>获得任务简介</title>
        <para>
		  为特定用户返回任务简介：分配给用户的任务数量，用户可以认领的未分配任务的数量，
		  用户作为成员的群组可以认领的未分配任务。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /tasks-summary?user={userId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().xxx().count()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "assigned": {
    "total": 0
  },
  "unassigned": {
    "total": 1,
    "groups":
    {
      "accountancy": 1,
      "sales": 0,
      "engineering": 0,
      "management": 0
    }
  }
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>任务列表</title>
        <para>
		  返回分页的任务列表，可以同构"id", "name", "description", "priority", "assignee",
          "executionId" 或 "processInstanceId"排序。列表必须基于特定角色的用户：负责人
		  （分配给用户的任务列表）或候选人（用户可以领取的任务列表）或候选群组
		  （用户作为成员的群组可以认领的任务列表）。如果任务通过"formResourceKey"属性指定了一个表单。
		  任务的表单可以通过获取任务表单REST API获得。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">分页请求：</emphasis>
              <literal>GET /tasks?[assignee={userId}|candidate={userId}|candidate-group={groupId}]&amp;start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">实例：</emphasis>
              <programlisting>curl --basic --user kermit:kermit http://localhost:8080/activiti-rest/service/tasks?assignee=kermit</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().xxx().listPage()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">分页响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>获取任务</title>
        <para>
		  通过任务id获取任务的细节。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /task/{taskId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createTaskQuery().taskId(taskId).singleResult()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
      "id": "127",
      "name": "Handle vacation request",
      "description": "Vacation request by Kermit",
      "delegationState": "pending",
      "dueDate": "2010-10-13T14:54:26.750+02:00",
      "priority": 50,
      "assignee": null,
      "executionId": "118",
      "formResourceKey": "org/activiti/examples/taskforms/approve.form",
      "owner": "Kermit",
      "parentTaskId": "120",
      "processDefinitionId": "financialReport:1",
      "processInstanceId": "123",
      "taskDefinitionKey": "125",
      "subTaskList": [
        {
          "id": "129",
          "name": "Analyze request",
          "description": "Analyze request",
          "delegationState": "pending",
          "dueDate": "2010-10-13T14:54:26.750+02:00",
          "priority": 50,
          "assignee": null,
          "executionId": "118",
          "owner": "Kermit",
          "parentTaskId": "127"
        }
      ],
      "identityLinkList" : [
        {
          "type": "candidate",
          "userId": "Fozzie",
          "groupId": null
        }
      ],
      "attachmentList" : [
        {
          "id": "130",
          "name": "vacation_request.xls",
          "description": "Vacation request",
          "type": "application/pdf",
          "url": null
        }
      ]
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>获取任务表单</title>
        <para>
		  获取任务表单。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /task/{taskId}/form</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().getRenderedTaskForm(taskId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>&lt;user-defined-response&gt;</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>执行任务操作</title>
        <para>
		  对任务执行操作（认领，释放，分配或完成）。
		  对于“完成”操作的额外变量（通过表单）可以通过请求体传递。
		  要从表单读取更多变量，可以参考启动流程实例章节。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>PUT /task/{taskId}/[claim|unclaim|complete|assign]</literal>
			  认领和释放不需要JSON体，对于完成你可以提供一些变量，分配必须使用userId。
			  例如，完成操作的请求体：
              <programlisting>
{
      "variableName1": "variableValue1",
      "variableName2": "variableValue2"
}</programlisting>
			  例如，分配操作的请求体：
              <programlisting>
{
      "userId": "newAssignee"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().xxx(taskId ...)</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

	  <section>
        <title>表单属性列表</title>
        <para>
		  返回运行中任务的表单的属性列表，由流程定义。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /form/{taskId}/properties</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getFormService().getTaskFormData(taskId).getFormProperties()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "userName",
      "name": "User",
      "value": "foobar",
      "type": "string",
      "required": "true",
      "readable": "true",
      "writable": "true"
    }
]
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    <section>
        <title>为任务添加一个附件</title>
        <para>
		  为任务实例添加一个附件。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>PUT /task/{taskId}/attachment</literal>
              <programlisting>{}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createAttachment(...)</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
        {
          "id": "130",
          "name": "vacation_request.xls",
          "description": "Vacation request",
          "type": "application/pdf",
          "url": null
        }</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
          <title>获得任务附件</title>
          <para>
		  返回任务附件
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">请求：</emphasis>
                <literal>GET /attachment/{attachmentId}</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>taskService.getAttachment(attachmentId);</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">响应：</emphasis>
                <programlisting>附件。</programlisting>
              </para>
            </listitem>
          </itemizedlist>
      </section>

    <section>
        <title>为任务添加一个url</title>
        <para>
		  为任务实例添加一个url
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>PUT /task/{taskId}/url</literal>
              <programlisting>{}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getTaskService().createAttachment(...)</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
        {
          "id": "130",
          "name": "google.com",
          "description": "Good search sitet",
          "type": null,
          "url": "http://www.google.com"
        }</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>
    </section>


    <!-- IDENTITY -->

    <section>

      <title>身份</title>

      <section>
        <title>登录</title>
        <para>
		  认证一个用户。如果用户和密码不匹配，会返回403.
		  如果认证成功，会返回200响应状态。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>POST /login</literal>
              <programlisting>
{
  "userId": "kermit",
  "password": "kermit"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().checkPassword(userId, password)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>获得用户</title>
        <para>
		  返回用户的细节。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /user/{userId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userId(userId).singleResult();</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "id": "kermit",
  "firstName": "Kermit",
  "lastName": "the Frog",
  "email": "kermit@server.com"
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>列出用户的群组</title>
        <para>
		  返回用户对应的群组分页列表，可以使用"id", "name" 或 "type"排序。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">分页请求：</emphasis>
              <literal>GET /user/{userId}/groups?start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().xxx(userId)</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">分页响应：</emphasis>
              <programlisting>
{
  data: [
    {
      "id": "admin",
      "name": "System administrator",
      "type": "security-role"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>查询用户</title>
        <para>
		  返回用户列表，通过查询的文本搜索firstname和lastname。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">分页请求：</emphasis>
              <literal>GET /users?searchText=ker</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userFirstNameLike(searchText).list()</literal>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().userLastNameLike(searchText).list()</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  data: [
    {
      "id": "kermit",
      "firstName": "Kermit",
      "lastName": "the Frog",
      "email": "kermit@server.com"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>创建用户</title>
        <para>
		  创建一个新用户。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>PUT /user</literal>
              <programlisting>
{
  "id": "kermit",
  "firstName": "Kermit",
  "lastName": "the Frog",
  "email": "kermit@server.com",
  "password": "kermit"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().newUser();</literal>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().saveUser();</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>为群组添加用户</title>
        <para>
		  为群组添加用户，通过这个REST服务。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>POST /user/{userId}/groups</literal>
              <programlisting>
["management", "sales"]
</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService().createMembership(userId, groupId);</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>从群组删除用户</title>
        <para>
		  从群组删除用户。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>DELETE /user/{userId}/groups/{groupId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService().deleteMembership(userId, groupId);</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
          <title>获得用户图片</title>
          <para>
		  返回用户图片
          </para>
          <itemizedlist>
            <listitem>
              <para>
                <emphasis role="bold">请求：</emphasis>
                <literal>GET /user/{userId}/picture</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">API:</emphasis>
                <literal>identityService.getUserPicture(userId);</literal>
              </para>
            </listitem>
            <listitem>
              <para>
                <emphasis role="bold">响应：</emphasis>
                <programlisting>The user picture.</programlisting>
              </para>
            </listitem>
          </itemizedlist>
      </section>

      <section>
        <title>获得群组</title>
        <para>
		  返回群组细节。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /group/{groupId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createGroupQuery().groupId(groupId).singleResult();</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "id": "admin",
  "name": "System administrator",
  "type": "security-role"
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>群组用户列表</title>
        <para>
		  返回一个群组的用户细节，可以通过"id", "firstName", "lastName" 或 "email"排序。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">分页请求：</emphasis>
              <literal>GET /group/{groupId}/users</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getIdentityService().createUserQuery().memberOfGroup(groupId).list()</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">分页响应：</emphasis>
              <programlisting>
{
  data: [
    {
      "id": "kermit",
      "firstName": "Kermit",
      "lastName": "the Frog",
      "email": "kermit@server.com"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    <section>
        <title>查询群组</title>
        <para>
		  返回群组列表，通过查询的文本搜索id或name。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">分页请求：</emphasis>
              <literal>GET /groups?searchText=ad</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>identityService.createGroupQuery().list()</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  data: [
    {
      "id": "admin",
      "name": "System administrator",
      "type": "security-role"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    <section>
        <title>创建群组</title>
        <para>
		  创建新群组。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>PUT /group</literal>
              <programlisting>
{
  "id": "admin",
  "name": "System administrator",
  "type": "security-role"
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService.newGroup();</literal>
              <literal>identityService.saveGroup();</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>为群组添加用户</title>
        <para>
		  为群组添加用户。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>POST /group/{groupId}/users</literal>
              <programlisting>
["kermit", "fozzie"]
</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService().createMembership(userId, groupId);</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>为群组删除用户</title>
        <para>
		  为群组删除用户。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>DELETE /group/{groupId}/users/{userId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>identityService().deleteMembership(userId, groupId);</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>
   </section>


    <!-- MANAGEMENT -->

    <section>

      <title>管理</title>

      <section>
        <title>作业列表</title>
        <para>
		  返回分页的作业列表，可以通过"id", "process-instance-id", "execution-id",
          "due-date", "retries" 或一些自定义的属性id排序。列表可以通过
          process instance id, due date 或作业是否重试，是否可执行，只是消息或定时器来查询。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">分页请求：</emphasis>
              <literal>GET /management/jobs?process-instance={processInstanceId?}&amp;with-retries-left={withRetriesLeft=false}&amp;executable={axecutable=false}&amp;only-timers={onlyTimers=false}&amp;only-messages={onlyMessage=false}&amp;duedate-lt={iso8601Date}&amp;duedate-ltoe={iso8601Date}&amp;duedate-ht={iso8601Date}&amp;duedate-htoe={iso8601Date}&amp;start={start=0}&amp;size={size=10}&amp;sort={sort=id}&amp;order={order=asc}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).createJobQuery().xxx().listPage()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">分页响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "id": "212",
      "executionId": "211",
      "retries": -1,
      "processInstanceId": "210",
      "dueDate": null,
      "assignee": null,
      "exceptionMessage": "Can\'t find scripting engine for \'groovy\'"
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>获得作业</title>
        <para>
		  返回作业的细节。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /management/job({jobId}</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).createJobQuery().id(jobId).singleResult()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "id": "212",
  "executionId": "211",
  "retries": -1,
  "processInstanceId": "210",
  "dueDate": null,
  "assignee": null,
  "exceptionMessage": "Can\'t find scripting engine for \'groovy\'",
  "stacktrace": "org.activiti.engine.ActivitiException: Can't find scripting engine for 'groovy'\n\tat ..."
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>执行一个作业</title>
        <para>
		  执行一个作业。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>PUT /management/job/{jobId}/execute</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().executeJob(jobId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>执行多个作业</title>
        <para>
		  执行多个作业。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>POST /management/jobs/execute</literal>
              <programlisting>
{
  "jobIds": [ "212" ]
}</programlisting>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().executeJob(jobId)</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "success": true
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>数据库表列表</title>
        <para>
		  返回引擎中的所有数据库表的元数据。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /management/tables</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().getTableCount()</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              <emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "tableName": "ACT_GE_PROPERTY",
      "noOfResults": 2
    }
  ]
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title>获得表元数据</title>
        <para>
		  返回一个数据库表的元数据。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">请求：</emphasis>
              <literal>GET /management/table/{tableName}</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().getTableMetaData(tableName))</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">响应：</emphasis>
              <programlisting>
{
  "tableName": "ACT_GE_PROPERTY",
  "columnNames": ["REV_","NAME_","VALUE_"],
  "columnNames": ["class java.lang.Integer", "class java.lang.String", "class java.lang.String"]
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>


      <section>
        <title>获得表数据</title>
        <para>
		  返回分页的数据库表数据列表。
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <emphasis role="bold">分页请求：</emphasis>
              <literal>GET /management/table/{tableName}/data</literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">API:</emphasis>
              <literal>ProcessEngines.getProcessEngine(configuredProcessEngineName).getManagementService().createTablePageQuery().tableName(tableName).start(start).size(size).orderXXX(sort).singleResult();
              </literal>
            </para>
          </listitem>
          <listitem>
            <para><emphasis role="bold">分页响应：</emphasis>
              <programlisting>
{
  "data": [
    {
      "NAME_": "schema.version",
      "REV_": "1",
      "VALUE_": "5.10"
    },
    {
      "NAME_": "next.dbid",
      "REV_": "4",
      "VALUE_": "310"
    }
  ],
  "total": 2,
  "start": 0,
  "sort": "NAME_",
  "order": "asc",
  "size": 2
}</programlisting>
            </para>
          </listitem>
        </itemizedlist>
      </section>

    </section>

</chapter>
